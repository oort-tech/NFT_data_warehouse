(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsHttpClient = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var IpfsHttpClient=(()=>{var Up=Object.create;var ft=Object.defineProperty;var Ip=Object.getOwnPropertyDescriptor;var _p=Object.getOwnPropertyNames;var Np=Object.getPrototypeOf,Dp=Object.prototype.hasOwnProperty;var as=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var E=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),z=(e,r)=>{for(var t in r)ft(e,t,{get:r[t],enumerable:!0})},cs=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of _p(r))!Dp.call(e,o)&&o!==t&&ft(e,o,{get:()=>r[o],enumerable:!(n=Ip(r,o))||n.enumerable});return e};var U=(e,r,t)=>(t=e!=null?Up(Np(e)):{},cs(r||!e||!e.__esModule?ft(t,"default",{value:e,enumerable:!0}):t,e)),Rp=e=>cs(ft({},"__esModule",{value:!0}),e);var ma=E((_0,da)=>{da.exports=mo;var pa=128,Eh=127,Ph=~Eh,Th=Math.pow(2,31);function mo(e,r,t){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw mo.bytes=0,new RangeError("Could not encode varint");r=r||[],t=t||0;for(var n=t;e>=Th;)r[t++]=e&255|pa,e/=128;for(;e&Ph;)r[t++]=e&255|pa,e>>>=7;return r[t]=e|0,mo.bytes=t-n+1,r}});var ga=E((N0,ya)=>{ya.exports=ho;var Ah=128,ha=127;function ho(e,n){var t=0,n=n||0,o=0,s=n,i,a=e.length;do{if(s>=a||o>49)throw ho.bytes=0,new RangeError("Could not decode varint");i=e[s++],t+=o<28?(i&ha)<<o:(i&ha)*Math.pow(2,o),o+=7}while(i>=Ah);return ho.bytes=s-n,t}});var ba=E((D0,wa)=>{var Ch=Math.pow(2,7),vh=Math.pow(2,14),kh=Math.pow(2,21),Bh=Math.pow(2,28),Uh=Math.pow(2,35),Ih=Math.pow(2,42),_h=Math.pow(2,49),Nh=Math.pow(2,56),Dh=Math.pow(2,63);wa.exports=function(e){return e<Ch?1:e<vh?2:e<kh?3:e<Bh?4:e<Uh?5:e<Ih?6:e<_h?7:e<Nh?8:e<Dh?9:10}});var Nt=E((R0,xa)=>{xa.exports={encode:ma(),decode:ga(),encodingLength:ba()}});var X=E((r1,Ba)=>{"use strict";function ka(e,r){for(let t in r)Object.defineProperty(e,t,{value:r[t],enumerable:!0,configurable:!0});return e}function Qh(e,r,t){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof r=="object"&&(t=r,r=""),r&&(t.code=r);try{return ka(e,t)}catch{t.message=e.message,t.stack=e.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),ka(new o,t)}}Ba.exports=Qh});var Ra=E((u1,Da)=>{function ry(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}Da.exports=ry});var Ao=E((f1,Oa)=>{"use strict";var ty=Ra(),Ft=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Xr=ty(),ny=Ft&&!Xr,oy=Xr&&!Ft,sy=Xr&&Ft,iy=typeof as=="function"&&typeof process<"u"&&typeof process.release<"u"&&process.release.name==="node"&&!Xr,ay=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,cy=typeof process<"u"&&typeof process.env<"u"&&!1,uy=typeof navigator<"u"&&navigator.product==="ReactNative";Oa.exports={isTest:cy,isElectron:Xr,isElectronMain:oy,isElectronRenderer:sy,isNode:iy,isBrowser:ny,isWebWorker:ay,isEnvWithDom:Ft,isReactNative:uy}});var ja=E((d1,$a)=>{var Sr=1e3,Er=Sr*60,Pr=Er*60,Ye=Pr*24,ly=Ye*7,py=Ye*365.25;$a.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return dy(e);if(t==="number"&&isFinite(e))return r.long?hy(e):my(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function dy(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*py;case"weeks":case"week":case"w":return t*ly;case"days":case"day":case"d":return t*Ye;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Pr;case"minutes":case"minute":case"mins":case"min":case"m":return t*Er;case"seconds":case"second":case"secs":case"sec":case"s":return t*Sr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function my(e){var r=Math.abs(e);return r>=Ye?Math.round(e/Ye)+"d":r>=Pr?Math.round(e/Pr)+"h":r>=Er?Math.round(e/Er)+"m":r>=Sr?Math.round(e/Sr)+"s":e+"ms"}function hy(e){var r=Math.abs(e);return r>=Ye?$t(e,r,Ye,"day"):r>=Pr?$t(e,r,Pr,"hour"):r>=Er?$t(e,r,Er,"minute"):r>=Sr?$t(e,r,Sr,"second"):e+" ms"}function $t(e,r,t,n){var o=r>=t*1.5;return Math.round(e/t)+" "+n+(o?"s":"")}});var Ma=E((m1,za)=>{function yy(e){t.debug=t,t.default=t,t.coerce=c,t.disable=s,t.enable=o,t.enabled=i,t.humanize=ja(),t.destroy=p,Object.keys(e).forEach(d=>{t[d]=e[d]}),t.names=[],t.skips=[],t.formatters={};function r(d){let y=0;for(let x=0;x<d.length;x++)y=(y<<5)-y+d.charCodeAt(x),y|=0;return t.colors[Math.abs(y)%t.colors.length]}t.selectColor=r;function t(d){let y,x=null,_,A;function k(...I){if(!k.enabled)return;let j=k,K=Number(new Date),ie=K-(y||K);j.diff=ie,j.prev=y,j.curr=K,y=K,I[0]=t.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let V=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(ae,Y)=>{if(ae==="%%")return"%";V++;let ce=t.formatters[Y];if(typeof ce=="function"){let nr=I[V];ae=ce.call(j,nr),I.splice(V,1),V--}return ae}),t.formatArgs.call(j,I),(j.log||t.log).apply(j,I)}return k.namespace=d,k.useColors=t.useColors(),k.color=t.selectColor(d),k.extend=n,k.destroy=t.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>x!==null?x:(_!==t.namespaces&&(_=t.namespaces,A=t.enabled(d)),A),set:I=>{x=I}}),typeof t.init=="function"&&t.init(k),k}function n(d,y){let x=t(this.namespace+(typeof y>"u"?":":y)+d);return x.log=this.log,x}function o(d){t.save(d),t.namespaces=d,t.names=[],t.skips=[];let y,x=(typeof d=="string"?d:"").split(/[\s,]+/),_=x.length;for(y=0;y<_;y++)x[y]&&(d=x[y].replace(/\*/g,".*?"),d[0]==="-"?t.skips.push(new RegExp("^"+d.slice(1)+"$")):t.names.push(new RegExp("^"+d+"$")))}function s(){let d=[...t.names.map(a),...t.skips.map(a).map(y=>"-"+y)].join(",");return t.enable(""),d}function i(d){if(d[d.length-1]==="*")return!0;let y,x;for(y=0,x=t.skips.length;y<x;y++)if(t.skips[y].test(d))return!1;for(y=0,x=t.names.length;y<x;y++)if(t.names[y].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}za.exports=yy});var qa=E((se,jt)=>{se.formatArgs=wy;se.save=by;se.load=xy;se.useColors=gy;se.storage=Sy();se.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();se.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gy(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function wy(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+jt.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(t++,o==="%c"&&(n=t))}),e.splice(n,0,r)}se.log=console.debug||console.log||(()=>{});function by(e){try{e?se.storage.setItem("debug",e):se.storage.removeItem("debug")}catch{}}function xy(){let e;try{e=se.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Sy(){try{return localStorage}catch{}}jt.exports=Ma()(se);var{formatters:Ey}=jt.exports;Ey.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}});var Bo=E(Mt=>{"use strict";var Co=class extends Error{constructor(r="Request timed out"){super(r),this.name="TimeoutError"}};Mt.TimeoutError=Co;var vo=class extends Error{constructor(r="The operation was aborted."){super(r),this.name="AbortError"}};Mt.AbortError=vo;var ko=class extends Error{constructor(r){super(r.statusText),this.name="HTTPError",this.response=r}};Mt.HTTPError=ko});var Qr=E(()=>{});var Ha=E((E1,Uo)=>{"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?Uo.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:Uo.exports={default:Qr().default,Headers:Qr().Headers,Request:Qr().Request,Response:Qr().Response}});var Ga=E((P1,Va)=>{"use strict";Va.exports=Ha()});var Ka=E((T1,Ja)=>{"use strict";var{TimeoutError:Py,AbortError:Ty}=Bo(),{Response:Wa,Request:Ay,Headers:_o,default:Cy}=Ga(),vy=(e,r={})=>{let t=new XMLHttpRequest;t.open(r.method||"GET",e.toString(),!0);let{timeout:n,headers:o}=r;if(n&&n>0&&n<1/0&&(t.timeout=n),r.overrideMimeType!=null&&t.overrideMimeType(r.overrideMimeType),o)for(let[s,i]of new _o(o))t.setRequestHeader(s,i);return r.signal&&(r.signal.onabort=()=>t.abort()),r.onUploadProgress&&(t.upload.onprogress=r.onUploadProgress),t.responseType="arraybuffer",new Promise((s,i)=>{let a=c=>{switch(c.type){case"error":{s(Wa.error());break}case"load":{s(new Io(t.responseURL,t.response,{status:t.status,statusText:t.statusText,headers:Uy(t.getAllResponseHeaders())}));break}case"timeout":{i(new Py);break}case"abort":{i(new Ty);break}default:break}};t.onerror=a,t.onload=a,t.ontimeout=a,t.onabort=a,t.send(r.body)})},ky=Cy,By=(e,r={})=>r.onUploadProgress!=null?vy(e,r):ky(e,r),Uy=e=>{let r=new _o;for(let t of e.trim().split(/[\r\n]+/)){let n=t.indexOf(": ");n>0&&r.set(t.slice(0,n),t.slice(n+1))}return r},Io=class extends Wa{constructor(r,t,n){super(t,n),Object.defineProperty(this,"url",{value:r})}};Ja.exports={fetch:By,Request:Ay,Headers:_o}});var Qa=E((A1,Xa)=>{"use strict";Xa.exports=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let r=Object.getPrototypeOf(e);return r===null||r===Object.prototype}});var Do=E((rc,tc)=>{"use strict";var qt=Qa(),{hasOwnProperty:Ya}=Object.prototype,{propertyIsEnumerable:Iy}=Object,Tr=(e,r,t)=>Object.defineProperty(e,r,{value:t,writable:!0,enumerable:!0,configurable:!0}),_y=rc,Za={concatArrays:!1,ignoreUndefined:!1},Ht=e=>{let r=[];for(let t in e)Ya.call(e,t)&&r.push(t);if(Object.getOwnPropertySymbols){let t=Object.getOwnPropertySymbols(e);for(let n of t)Iy.call(e,n)&&r.push(n)}return r};function Ar(e){return Array.isArray(e)?Ny(e):qt(e)?Dy(e):e}function Ny(e){let r=e.slice(0,0);return Ht(e).forEach(t=>{Tr(r,t,Ar(e[t]))}),r}function Dy(e){let r=Object.getPrototypeOf(e)===null?Object.create(null):{};return Ht(e).forEach(t=>{Tr(r,t,Ar(e[t]))}),r}var ec=(e,r,t,n)=>(t.forEach(o=>{typeof r[o]>"u"&&n.ignoreUndefined||(o in e&&e[o]!==Object.getPrototypeOf(e)?Tr(e,o,No(e[o],r[o],n)):Tr(e,o,Ar(r[o])))}),e),Ry=(e,r,t)=>{let n=e.slice(0,0),o=0;return[e,r].forEach(s=>{let i=[];for(let a=0;a<s.length;a++)Ya.call(s,a)&&(i.push(String(a)),s===e?Tr(n,o++,s[a]):Tr(n,o++,Ar(s[a])));n=ec(n,s,Ht(s).filter(a=>!i.includes(a)),t)}),n};function No(e,r,t){return t.concatArrays&&Array.isArray(e)&&Array.isArray(r)?Ry(e,r,t):!qt(r)||!qt(e)?Ar(r):ec(e,r,Ht(r),t)}tc.exports=function(...e){let r=No(Ar(Za),this!==_y&&this||{},Za),t={_:{}};for(let n of e)if(n!==void 0){if(!qt(n))throw new TypeError("`"+n+"` is not an Option Object");t=No(t,{_:n},r)}return t._}});var Oo=E((C1,oc)=>{"use strict";var Oy=typeof navigator<"u"&&navigator.product==="ReactNative";function Ly(){return Oy?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var Zr=self.URL,nc=Ly(),Ro=class{constructor(r="",t=nc){this.super=new Zr(r,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(r){this.super.hash=r}set host(r){this.super.host=r}set hostname(r){this.super.hostname=r}set href(r){this.super.href=r}set password(r){this.super.password=r}set pathname(r){this.super.pathname=r}set port(r){this.super.port=r}set protocol(r){this.super.protocol=r}set search(r){this.super.search=r}set username(r){this.super.username=r}static createObjectURL(r){return Zr.createObjectURL(r)}static revokeObjectURL(r){Zr.revokeObjectURL(r)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Fy(e){if(typeof e=="string")return new Zr(e).toString();if(!(e instanceof Zr)){let r=e.username&&e.password?`${e.username}:${e.password}@`:"",t=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",s=e.host||"",i=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),c=e.hash||"",p=e.pathname||"",d=e.path||p+a;return`${o}${r||t}${s||i+n}${d}${c}`}}oc.exports={URLWithLegacySupport:Ro,URLSearchParams:self.URLSearchParams,defaultBase:nc,format:Fy}});var ac=E((v1,ic)=>{"use strict";var{URLWithLegacySupport:sc,format:$y}=Oo();ic.exports=(e,r={},t={},n)=>{let o=r.protocol?r.protocol.replace(":",""):"http";o=(t[o]||n||o)+":";let s;try{s=new sc(e)}catch{s={}}let i=Object.assign({},r,{protocol:o||s.protocol,host:r.host||s.host});return new sc(e,$y(i)).toString()}});var uc=E((k1,cc)=>{"use strict";var{URLWithLegacySupport:jy,format:zy,URLSearchParams:My,defaultBase:qy}=Oo(),Hy=ac();cc.exports={URL:jy,URLSearchParams:My,format:zy,relative:Hy,defaultBase:qy}});var Fo=E((B1,Lo)=>{function fc(e){let r=new globalThis.AbortController;function t(){r.abort();for(let n of e)!n||!n.removeEventListener||n.removeEventListener("abort",t)}for(let n of e)if(!(!n||!n.addEventListener)){if(n.aborted){t();break}n.addEventListener("abort",t)}return r.signal}Lo.exports=fc;Lo.exports.anySignal=fc});var pc=E((U1,lc)=>{"use strict";async function*Vy(e,r={}){let t=e.getReader();try{for(;;){let n=await t.read();if(n.done)return;yield n.value}}finally{r.preventCancel!==!0&&t.cancel(),t.releaseLock()}}lc.exports=Vy});var mc=E((I1,dc)=>{"use strict";var Gy=async e=>{let r=[];for await(let t of e)r.push(t);return r};dc.exports=Gy});var Vt=E((_1,xc)=>{"use strict";var{fetch:Wy,Request:Jy,Headers:Ky}=Ka(),{TimeoutError:$o,HTTPError:wc}=Bo(),hc=Do().bind({ignoreUndefined:!0}),{URL:yc,URLSearchParams:gc}=uc(),Xy=Fo(),Qy=pc(),{isBrowser:Zy,isWebWorker:Yy}=Ao(),eg=mc(),rg=(e,r,t)=>{if(r===void 0)return e;let n=Date.now(),o=()=>Date.now()-n>=r;return new Promise((s,i)=>{let a=setTimeout(()=>{o()&&(i(new $o),t.abort())},r),c=p=>y=>{if(clearTimeout(a),o()){i(new $o);return}p(y)};e.then(c(s),c(i))})},tg={throwHttpErrors:!0,credentials:"same-origin"},J=class{constructor(r={}){this.opts=hc(tg,r)}async fetch(r,t={}){let n=hc(this.opts,t),o=new Ky(n.headers);if(typeof r!="string"&&!(r instanceof yc||r instanceof Jy))throw new TypeError("`resource` must be a string, URL, or Request");let s=new yc(r.toString(),n.base),{searchParams:i,transformSearchParams:a,json:c}=n;i&&(typeof a=="function"?s.search=a(new gc(n.searchParams)):s.search=new gc(n.searchParams)),c&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));let p=new AbortController,d=Xy([p.signal,n.signal]);globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(Zy||Yy)&&(n.body=new Blob(await eg(Qy(n.body))));let y=await rg(Wy(s.toString(),{...n,signal:d,timeout:void 0,headers:o,duplex:"half"}),n.timeout,p);if(!y.ok&&n.throwHttpErrors)throw n.handleError&&await n.handleError(y),new wc(y);return y.iterator=async function*(){yield*bc(y.body)},y.ndjson=async function*(){for await(let x of ng(y.iterator()))t.transform?yield t.transform(x):yield x},y}post(r,t={}){return this.fetch(r,{...t,method:"POST"})}get(r,t={}){return this.fetch(r,{...t,method:"GET"})}put(r,t={}){return this.fetch(r,{...t,method:"PUT"})}delete(r,t={}){return this.fetch(r,{...t,method:"DELETE"})}options(r,t={}){return this.fetch(r,{...t,method:"OPTIONS"})}},ng=async function*(e){let r=new TextDecoder,t="";for await(let n of e){t+=r.decode(n,{stream:!0});let o=t.split(/\r?\n/);for(let s=0;s<o.length-1;s++){let i=o[s].trim();i.length>0&&(yield JSON.parse(i))}t=o[o.length-1]}t+=r.decode(),t=t.trim(),t.length!==0&&(yield JSON.parse(t))},bc=e=>{if(og(e))return e;if(ig(e)){let r=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:r.next.bind(r),return(t){return e.destroy(),typeof r.return=="function"?r.return():Promise.resolve({done:!0,value:t})}}}}}if(sg(e)){let r=e.getReader();return async function*(){try{for(;;){let{done:t,value:n}=await r.read();if(t)return;n&&(yield n)}}finally{r.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},og=e=>typeof e=="object"&&e!==null&&typeof e[Symbol.asyncIterator]=="function",sg=e=>e&&typeof e.getReader=="function",ig=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");J.HTTPError=wc;J.TimeoutError=$o;J.streamToAsyncIterator=bc;J.post=(e,r)=>new J(r).post(e,r);J.get=(e,r)=>new J(r).get(e,r);J.put=(e,r)=>new J(r).put(e,r);J.delete=(e,r)=>new J(r).delete(e,r);J.options=(e,r)=>new J(r).options(e,r);xc.exports=J});var zc=E((Hx,jc)=>{"use strict";jc.exports=Eg;function Eg(e,r){for(var t=new Array(arguments.length-1),n=0,o=2,s=!0;o<arguments.length;)t[n++]=arguments[o++];return new Promise(function(a,c){t[n]=function(d){if(s)if(s=!1,d)c(d);else{for(var y=new Array(arguments.length-1),x=0;x<y.length;)y[x++]=arguments[x];a.apply(null,y)}};try{e.apply(r||null,t)}catch(p){s&&(s=!1,c(p))}})}});var Vc=E(Hc=>{"use strict";var Qt=Hc;Qt.length=function(r){var t=r.length;if(!t)return 0;for(var n=0;--t%4>1&&r.charAt(t)==="=";)++n;return Math.ceil(r.length*3)/4-n};var vr=new Array(64),qc=new Array(123);for(Se=0;Se<64;)qc[vr[Se]=Se<26?Se+65:Se<52?Se+71:Se<62?Se-4:Se-59|43]=Se++;var Se;Qt.encode=function(r,t,n){for(var o=null,s=[],i=0,a=0,c;t<n;){var p=r[t++];switch(a){case 0:s[i++]=vr[p>>2],c=(p&3)<<4,a=1;break;case 1:s[i++]=vr[c|p>>4],c=(p&15)<<2,a=2;break;case 2:s[i++]=vr[c|p>>6],s[i++]=vr[p&63],a=0;break}i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),i=0)}return a&&(s[i++]=vr[c],s[i++]=61,a===1&&(s[i++]=61)),o?(i&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))};var Mc="invalid encoding";Qt.decode=function(r,t,n){for(var o=n,s=0,i,a=0;a<r.length;){var c=r.charCodeAt(a++);if(c===61&&s>1)break;if((c=qc[c])===void 0)throw Error(Mc);switch(s){case 0:i=c,s=1;break;case 1:t[n++]=i<<2|(c&48)>>4,i=c,s=2;break;case 2:t[n++]=(i&15)<<4|(c&60)>>2,i=c,s=3;break;case 3:t[n++]=(i&3)<<6|c,s=0;break}}if(s===1)throw Error(Mc);return n-o};Qt.test=function(r){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(r)}});var Wc=E((Gx,Gc)=>{"use strict";Gc.exports=Zt;function Zt(){this._listeners={}}Zt.prototype.on=function(r,t,n){return(this._listeners[r]||(this._listeners[r]=[])).push({fn:t,ctx:n||this}),this};Zt.prototype.off=function(r,t){if(r===void 0)this._listeners={};else if(t===void 0)this._listeners[r]=[];else for(var n=this._listeners[r],o=0;o<n.length;)n[o].fn===t?n.splice(o,1):++o;return this};Zt.prototype.emit=function(r){var t=this._listeners[r];if(t){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,n)}return this}});var eu=E((Wx,Yc)=>{"use strict";Yc.exports=Jc(Jc);function Jc(e){return typeof Float32Array<"u"?function(){var r=new Float32Array([-0]),t=new Uint8Array(r.buffer),n=t[3]===128;function o(c,p,d){r[0]=c,p[d]=t[0],p[d+1]=t[1],p[d+2]=t[2],p[d+3]=t[3]}function s(c,p,d){r[0]=c,p[d]=t[3],p[d+1]=t[2],p[d+2]=t[1],p[d+3]=t[0]}e.writeFloatLE=n?o:s,e.writeFloatBE=n?s:o;function i(c,p){return t[0]=c[p],t[1]=c[p+1],t[2]=c[p+2],t[3]=c[p+3],r[0]}function a(c,p){return t[3]=c[p],t[2]=c[p+1],t[1]=c[p+2],t[0]=c[p+3],r[0]}e.readFloatLE=n?i:a,e.readFloatBE=n?a:i}():function(){function r(n,o,s,i){var a=o<0?1:0;if(a&&(o=-o),o===0)n(1/o>0?0:2147483648,s,i);else if(isNaN(o))n(2143289344,s,i);else if(o>34028234663852886e22)n((a<<31|2139095040)>>>0,s,i);else if(o<11754943508222875e-54)n((a<<31|Math.round(o/1401298464324817e-60))>>>0,s,i);else{var c=Math.floor(Math.log(o)/Math.LN2),p=Math.round(o*Math.pow(2,-c)*8388608)&8388607;n((a<<31|c+127<<23|p)>>>0,s,i)}}e.writeFloatLE=r.bind(null,Kc),e.writeFloatBE=r.bind(null,Xc);function t(n,o,s){var i=n(o,s),a=(i>>31)*2+1,c=i>>>23&255,p=i&8388607;return c===255?p?NaN:a*(1/0):c===0?a*1401298464324817e-60*p:a*Math.pow(2,c-150)*(p+8388608)}e.readFloatLE=t.bind(null,Qc),e.readFloatBE=t.bind(null,Zc)}(),typeof Float64Array<"u"?function(){var r=new Float64Array([-0]),t=new Uint8Array(r.buffer),n=t[7]===128;function o(c,p,d){r[0]=c,p[d]=t[0],p[d+1]=t[1],p[d+2]=t[2],p[d+3]=t[3],p[d+4]=t[4],p[d+5]=t[5],p[d+6]=t[6],p[d+7]=t[7]}function s(c,p,d){r[0]=c,p[d]=t[7],p[d+1]=t[6],p[d+2]=t[5],p[d+3]=t[4],p[d+4]=t[3],p[d+5]=t[2],p[d+6]=t[1],p[d+7]=t[0]}e.writeDoubleLE=n?o:s,e.writeDoubleBE=n?s:o;function i(c,p){return t[0]=c[p],t[1]=c[p+1],t[2]=c[p+2],t[3]=c[p+3],t[4]=c[p+4],t[5]=c[p+5],t[6]=c[p+6],t[7]=c[p+7],r[0]}function a(c,p){return t[7]=c[p],t[6]=c[p+1],t[5]=c[p+2],t[4]=c[p+3],t[3]=c[p+4],t[2]=c[p+5],t[1]=c[p+6],t[0]=c[p+7],r[0]}e.readDoubleLE=n?i:a,e.readDoubleBE=n?a:i}():function(){function r(n,o,s,i,a,c){var p=i<0?1:0;if(p&&(i=-i),i===0)n(0,a,c+o),n(1/i>0?0:2147483648,a,c+s);else if(isNaN(i))n(0,a,c+o),n(2146959360,a,c+s);else if(i>17976931348623157e292)n(0,a,c+o),n((p<<31|2146435072)>>>0,a,c+s);else{var d;if(i<22250738585072014e-324)d=i/5e-324,n(d>>>0,a,c+o),n((p<<31|d/4294967296)>>>0,a,c+s);else{var y=Math.floor(Math.log(i)/Math.LN2);y===1024&&(y=1023),d=i*Math.pow(2,-y),n(d*4503599627370496>>>0,a,c+o),n((p<<31|y+1023<<20|d*1048576&1048575)>>>0,a,c+s)}}}e.writeDoubleLE=r.bind(null,Kc,0,4),e.writeDoubleBE=r.bind(null,Xc,4,0);function t(n,o,s,i,a){var c=n(i,a+o),p=n(i,a+s),d=(p>>31)*2+1,y=p>>>20&2047,x=4294967296*(p&1048575)+c;return y===2047?x?NaN:d*(1/0):y===0?d*5e-324*x:d*Math.pow(2,y-1075)*(x+4503599627370496)}e.readDoubleLE=t.bind(null,Qc,0,4),e.readDoubleBE=t.bind(null,Zc,4,0)}(),e}function Kc(e,r,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24}function Xc(e,r,t){r[t]=e>>>24,r[t+1]=e>>>16&255,r[t+2]=e>>>8&255,r[t+3]=e&255}function Qc(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24)>>>0}function Zc(e,r){return(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])>>>0}});var ru=E((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var nu=E(tu=>{"use strict";var zo=tu;zo.length=function(r){for(var t=0,n=0,o=0;o<r.length;++o)n=r.charCodeAt(o),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(r.charCodeAt(o+1)&64512)===56320?(++o,t+=4):t+=3;return t};zo.read=function(r,t,n){var o=n-t;if(o<1)return"";for(var s=null,i=[],a=0,c;t<n;)c=r[t++],c<128?i[a++]=c:c>191&&c<224?i[a++]=(c&31)<<6|r[t++]&63:c>239&&c<365?(c=((c&7)<<18|(r[t++]&63)<<12|(r[t++]&63)<<6|r[t++]&63)-65536,i[a++]=55296+(c>>10),i[a++]=56320+(c&1023)):i[a++]=(c&15)<<12|(r[t++]&63)<<6|r[t++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))};zo.write=function(r,t,n){for(var o=n,s,i,a=0;a<r.length;++a)s=r.charCodeAt(a),s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&((i=r.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(i&1023),++a,t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128);return n-o}});var su=E((Kx,ou)=>{"use strict";ou.exports=Pg;function Pg(e,r,t){var n=t||8192,o=n>>>1,s=null,i=n;return function(c){if(c<1||c>o)return e(c);i+c>n&&(s=e(n),i=0);var p=r.call(s,i,i+=c);return i&7&&(i=(i|7)+1),p}}});var au=E((Xx,iu)=>{"use strict";iu.exports=H;var st=We();function H(e,r){this.lo=e>>>0,this.hi=r>>>0}var rr=H.zero=new H(0,0);rr.toNumber=function(){return 0};rr.zzEncode=rr.zzDecode=function(){return this};rr.length=function(){return 1};var Tg=H.zeroHash="\0\0\0\0\0\0\0\0";H.fromNumber=function(r){if(r===0)return rr;var t=r<0;t&&(r=-r);var n=r>>>0,o=(r-n)/4294967296>>>0;return t&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new H(n,o)};H.from=function(r){if(typeof r=="number")return H.fromNumber(r);if(st.isString(r))if(st.Long)r=st.Long.fromString(r);else return H.fromNumber(parseInt(r,10));return r.low||r.high?new H(r.low>>>0,r.high>>>0):rr};H.prototype.toNumber=function(r){if(!r&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};H.prototype.toLong=function(r){return st.Long?new st.Long(this.lo|0,this.hi|0,Boolean(r)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(r)}};var Ge=String.prototype.charCodeAt;H.fromHash=function(r){return r===Tg?rr:new H((Ge.call(r,0)|Ge.call(r,1)<<8|Ge.call(r,2)<<16|Ge.call(r,3)<<24)>>>0,(Ge.call(r,4)|Ge.call(r,5)<<8|Ge.call(r,6)<<16|Ge.call(r,7)<<24)>>>0)};H.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};H.prototype.zzEncode=function(){var r=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^r)>>>0,this.lo=(this.lo<<1^r)>>>0,this};H.prototype.zzDecode=function(){var r=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^r)>>>0,this.hi=(this.hi>>>1^r)>>>0,this};H.prototype.length=function(){var r=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?r<16384?r<128?1:2:r<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var We=E(Mo=>{"use strict";var b=Mo;b.asPromise=zc();b.base64=Vc();b.EventEmitter=Wc();b.float=eu();b.inquire=ru();b.utf8=nu();b.pool=su();b.LongBits=au();b.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);b.global=b.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||Mo;b.emptyArray=Object.freeze?Object.freeze([]):[];b.emptyObject=Object.freeze?Object.freeze({}):{};b.isInteger=Number.isInteger||function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r};b.isString=function(r){return typeof r=="string"||r instanceof String};b.isObject=function(r){return r&&typeof r=="object"};b.isset=b.isSet=function(r,t){var n=r[t];return n!=null&&r.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};b.Buffer=function(){try{var e=b.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}();b._Buffer_from=null;b._Buffer_allocUnsafe=null;b.newBuffer=function(r){return typeof r=="number"?b.Buffer?b._Buffer_allocUnsafe(r):new b.Array(r):b.Buffer?b._Buffer_from(r):typeof Uint8Array>"u"?r:new Uint8Array(r)};b.Array=typeof Uint8Array<"u"?Uint8Array:Array;b.Long=b.global.dcodeIO&&b.global.dcodeIO.Long||b.global.Long||b.inquire("long");b.key2Re=/^true|false|0|1$/;b.key32Re=/^-?(?:0|[1-9][0-9]*)$/;b.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;b.longToHash=function(r){return r?b.LongBits.from(r).toHash():b.LongBits.zeroHash};b.longFromHash=function(r,t){var n=b.LongBits.fromHash(r);return b.Long?b.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function cu(e,r,t){for(var n=Object.keys(r),o=0;o<n.length;++o)(e[n[o]]===void 0||!t)&&(e[n[o]]=r[n[o]]);return e}b.merge=cu;b.lcFirst=function(r){return r.charAt(0).toLowerCase()+r.substring(1)};function uu(e){function r(t,n){if(!(this instanceof r))return new r(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&cu(this,n)}return r.prototype=Object.create(Error.prototype,{constructor:{value:r,writable:!0,enumerable:!1,configurable:!0},name:{get(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),r}b.newError=uu;b.ProtocolError=uu("ProtocolError");b.oneOfGetter=function(r){for(var t={},n=0;n<r.length;++n)t[r[n]]=1;return function(){for(var o=Object.keys(this),s=o.length-1;s>-1;--s)if(t[o[s]]===1&&this[o[s]]!==void 0&&this[o[s]]!==null)return o[s]}};b.oneOfSetter=function(r){return function(t){for(var n=0;n<r.length;++n)r[n]!==t&&delete this[r[n]]}};b.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};b._configure=function(){var e=b.Buffer;if(!e){b._Buffer_from=b._Buffer_allocUnsafe=null;return}b._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},b._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}}});var Ko=E((Zx,du)=>{"use strict";du.exports=C;var de=We(),qo,Yt=de.LongBits,fu=de.base64,lu=de.utf8;function it(e,r,t){this.fn=e,this.len=r,this.next=void 0,this.val=t}function Vo(){}function Ag(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function C(){this.len=0,this.head=new it(Vo,0,0),this.tail=this.head,this.states=null}var pu=function(){return de.Buffer?function(){return(C.create=function(){return new qo})()}:function(){return new C}};C.create=pu();C.alloc=function(r){return new de.Array(r)};de.Array!==Array&&(C.alloc=de.pool(C.alloc,de.Array.prototype.subarray));C.prototype._push=function(r,t,n){return this.tail=this.tail.next=new it(r,t,n),this.len+=t,this};function Go(e,r,t){r[t]=e&255}function Cg(e,r,t){for(;e>127;)r[t++]=e&127|128,e>>>=7;r[t]=e}function Wo(e,r){this.len=e,this.next=void 0,this.val=r}Wo.prototype=Object.create(it.prototype);Wo.prototype.fn=Cg;C.prototype.uint32=function(r){return this.len+=(this.tail=this.tail.next=new Wo((r=r>>>0)<128?1:r<16384?2:r<2097152?3:r<268435456?4:5,r)).len,this};C.prototype.int32=function(r){return r<0?this._push(Jo,10,Yt.fromNumber(r)):this.uint32(r)};C.prototype.sint32=function(r){return this.uint32((r<<1^r>>31)>>>0)};function Jo(e,r,t){for(;e.hi;)r[t++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)r[t++]=e.lo&127|128,e.lo=e.lo>>>7;r[t++]=e.lo}C.prototype.uint64=function(r){var t=Yt.from(r);return this._push(Jo,t.length(),t)};C.prototype.int64=C.prototype.uint64;C.prototype.sint64=function(r){var t=Yt.from(r).zzEncode();return this._push(Jo,t.length(),t)};C.prototype.bool=function(r){return this._push(Go,1,r?1:0)};function Ho(e,r,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24}C.prototype.fixed32=function(r){return this._push(Ho,4,r>>>0)};C.prototype.sfixed32=C.prototype.fixed32;C.prototype.fixed64=function(r){var t=Yt.from(r);return this._push(Ho,4,t.lo)._push(Ho,4,t.hi)};C.prototype.sfixed64=C.prototype.fixed64;C.prototype.float=function(r){return this._push(de.float.writeFloatLE,4,r)};C.prototype.double=function(r){return this._push(de.float.writeDoubleLE,8,r)};var vg=de.Array.prototype.set?function(r,t,n){t.set(r,n)}:function(r,t,n){for(var o=0;o<r.length;++o)t[n+o]=r[o]};C.prototype.bytes=function(r){var t=r.length>>>0;if(!t)return this._push(Go,1,0);if(de.isString(r)){var n=C.alloc(t=fu.length(r));fu.decode(r,n,0),r=n}return this.uint32(t)._push(vg,t,r)};C.prototype.string=function(r){var t=lu.length(r);return t?this.uint32(t)._push(lu.write,t,r):this._push(Go,1,0)};C.prototype.fork=function(){return this.states=new Ag(this),this.head=this.tail=new it(Vo,0,0),this.len=0,this};C.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new it(Vo,0,0),this.len=0),this};C.prototype.ldelim=function(){var r=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=r.next,this.tail=t,this.len+=n),this};C.prototype.finish=function(){for(var r=this.head.next,t=this.constructor.alloc(this.len),n=0;r;)r.fn(r.val,t,n),n+=r.len,r=r.next;return t};C._configure=function(e){qo=e,C.create=pu(),qo._configure()}});var yu=E((Yx,hu)=>{"use strict";hu.exports=ke;var mu=Ko();(ke.prototype=Object.create(mu.prototype)).constructor=ke;var Je=We();function ke(){mu.call(this)}ke._configure=function(){ke.alloc=Je._Buffer_allocUnsafe,ke.writeBytesBuffer=Je.Buffer&&Je.Buffer.prototype instanceof Uint8Array&&Je.Buffer.prototype.set.name==="set"?function(r,t,n){t.set(r,n)}:function(r,t,n){if(r.copy)r.copy(t,n,0,r.length);else for(var o=0;o<r.length;)t[n++]=r[o++]}};ke.prototype.bytes=function(r){Je.isString(r)&&(r=Je._Buffer_from(r,"base64"));var t=r.length>>>0;return this.uint32(t),t&&this._push(ke.writeBytesBuffer,t,r),this};function kg(e,r,t){e.length<40?Je.utf8.write(e,r,t):r.utf8Write?r.utf8Write(e,t):r.write(e,t)}ke.prototype.string=function(r){var t=Je.Buffer.byteLength(r);return this.uint32(t),t&&this._push(kg,t,r),this};ke._configure()});var Zo=E((e2,Su)=>{"use strict";Su.exports=R;var Be=We(),Qo,bu=Be.LongBits,Bg=Be.utf8;function Ee(e,r){return RangeError("index out of range: "+e.pos+" + "+(r||1)+" > "+e.len)}function R(e){this.buf=e,this.pos=0,this.len=e.length}var gu=typeof Uint8Array<"u"?function(r){if(r instanceof Uint8Array||Array.isArray(r))return new R(r);throw Error("illegal buffer")}:function(r){if(Array.isArray(r))return new R(r);throw Error("illegal buffer")},xu=function(){return Be.Buffer?function(t){return(R.create=function(o){return Be.Buffer.isBuffer(o)?new Qo(o):gu(o)})(t)}:gu};R.create=xu();R.prototype._slice=Be.Array.prototype.subarray||Be.Array.prototype.slice;R.prototype.uint32=function(){var r=4294967295;return function(){if(r=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(r=(r|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,Ee(this,10);return r}}();R.prototype.int32=function(){return this.uint32()|0};R.prototype.sint32=function(){var r=this.uint32();return r>>>1^-(r&1)|0};function Xo(){var e=new bu(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw Ee(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw Ee(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}R.prototype.bool=function(){return this.uint32()!==0};function en(e,r){return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0}R.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ee(this,4);return en(this.buf,this.pos+=4)};R.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ee(this,4);return en(this.buf,this.pos+=4)|0};function wu(){if(this.pos+8>this.len)throw Ee(this,8);return new bu(en(this.buf,this.pos+=4),en(this.buf,this.pos+=4))}R.prototype.float=function(){if(this.pos+4>this.len)throw Ee(this,4);var r=Be.float.readFloatLE(this.buf,this.pos);return this.pos+=4,r};R.prototype.double=function(){if(this.pos+8>this.len)throw Ee(this,4);var r=Be.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,r};R.prototype.bytes=function(){var r=this.uint32(),t=this.pos,n=this.pos+r;if(n>this.len)throw Ee(this,r);return this.pos+=r,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};R.prototype.string=function(){var r=this.bytes();return Bg.read(r,0,r.length)};R.prototype.skip=function(r){if(typeof r=="number"){if(this.pos+r>this.len)throw Ee(this,r);this.pos+=r}else do if(this.pos>=this.len)throw Ee(this);while(this.buf[this.pos++]&128);return this};R.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};R._configure=function(e){Qo=e,R.create=xu(),Qo._configure();var r=Be.Long?"toLong":"toNumber";Be.merge(R.prototype,{int64:function(){return Xo.call(this)[r](!1)},uint64:function(){return Xo.call(this)[r](!0)},sint64:function(){return Xo.call(this).zzDecode()[r](!1)},fixed64:function(){return wu.call(this)[r](!0)},sfixed64:function(){return wu.call(this)[r](!1)}})}});var Au=E((r2,Tu)=>{"use strict";Tu.exports=tr;var Pu=Zo();(tr.prototype=Object.create(Pu.prototype)).constructor=tr;var Eu=We();function tr(e){Pu.call(this,e)}tr._configure=function(){Eu.Buffer&&(tr.prototype._slice=Eu.Buffer.prototype.slice)};tr.prototype.string=function(){var r=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+r,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+r,this.len))};tr._configure()});var vu=E((t2,Cu)=>{"use strict";Cu.exports=at;var Yo=We();(at.prototype=Object.create(Yo.EventEmitter.prototype)).constructor=at;function at(e,r,t){if(typeof e!="function")throw TypeError("rpcImpl must be a function");Yo.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(r),this.responseDelimited=Boolean(t)}at.prototype.rpcCall=function e(r,t,n,o,s){if(!o)throw TypeError("request must be specified");var i=this;if(!s)return Yo.asPromise(e,i,r,t,n,o);if(!i.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return i.rpcImpl(r,t[i.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(c,p){if(c)return i.emit("error",c,r),s(c);if(p===null){i.end(!0);return}if(!(p instanceof n))try{p=n[i.responseDelimited?"decodeDelimited":"decode"](p)}catch(d){return i.emit("error",d,r),s(d)}return i.emit("data",p,r),s(null,p)})}catch(a){i.emit("error",a,r),setTimeout(function(){s(a)},0);return}};at.prototype.end=function(r){return this.rpcImpl&&(r||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Bu=E(ku=>{"use strict";var Ug=ku;Ug.Service=vu()});var Iu=E((o2,Uu)=>{"use strict";Uu.exports={}});var Du=E(Nu=>{"use strict";var Z=Nu;Z.build="minimal";Z.Writer=Ko();Z.BufferWriter=yu();Z.Reader=Zo();Z.BufferReader=Au();Z.util=We();Z.rpc=Bu();Z.roots=Iu();Z.configure=_u;function _u(){Z.util._configure(),Z.Writer._configure(Z.BufferWriter),Z.Reader._configure(Z.BufferReader)}_u()});var Ou=E((i2,Ru)=>{"use strict";Ru.exports=Du()});var _f=E((e8,If)=>{If.exports=e=>{if(e[Symbol.asyncIterator])return e;if(e.getReader)return async function*(){let r=e.getReader();try{for(;;){let{done:t,value:n}=await r.read();if(t)return;yield n}}finally{r.releaseLock()}}();throw new Error("unknown stream")}});var Ap=E(()=>{});var vp=E((bv,Cp)=>{"use strict";var rw=Vt(),tw=(e,r)=>({path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:nw(e,r)});async function*nw(e,r){yield*(await new rw().get(e,r)).iterator()}Cp.exports=tw});var iw={};z(iw,{CID:()=>m,create:()=>ow,globSource:()=>sw,multiaddr:()=>B,urlSource:()=>Bp.default});var Op=e=>Promise.reject(new Error(`No base found for "${e}"`)),lt=class{constructor(r){this._basesByName={},this._basesByPrefix={},this._loadBase=r.loadBase||Op;for(let t of r.bases)this.addBase(t)}addBase(r){if(this._basesByName[r.name]||this._basesByPrefix[r.prefix])throw new Error(`Codec already exists for codec "${r.name}"`);this._basesByName[r.name]=r,this._basesByPrefix[r.prefix]=r}removeBase(r){delete this._basesByName[r.name],delete this._basesByPrefix[r.prefix]}async getBase(r){if(this._basesByName[r])return this._basesByName[r];if(this._basesByPrefix[r])return this._basesByPrefix[r];let t=await this._loadBase(r);return this._basesByName[t.name]==null&&this._basesByPrefix[t.prefix]==null&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}};var Lp=e=>Promise.reject(new Error(`No codec found for "${e}"`)),pt=class{constructor(r){this._codecsByName={},this._codecsByCode={},this._loadCodec=r.loadCodec||Lp;for(let t of r.codecs)this.addCodec(t)}addCodec(r){if(this._codecsByName[r.name]||this._codecsByCode[r.code])throw new Error(`Resolver already exists for codec "${r.name}"`);this._codecsByName[r.name]=r,this._codecsByCode[r.code]=r}removeCodec(r){delete this._codecsByName[r.name],delete this._codecsByCode[r.code]}async getCodec(r){let t=typeof r=="string"?this._codecsByName:this._codecsByCode;if(t[r])return t[r];let n=await this._loadCodec(r);return t[r]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}};var Fp=e=>Promise.reject(new Error(`No hasher found for "${e}"`)),dt=class{constructor(r){this._hashersByName={},this._hashersByCode={},this._loadHasher=r.loadHasher||Fp;for(let t of r.hashers)this.addHasher(t)}addHasher(r){if(this._hashersByName[r.name]||this._hashersByCode[r.code])throw new Error(`Resolver already exists for codec "${r.name}"`);this._hashersByName[r.name]=r,this._hashersByCode[r.code]=r}removeHasher(r){delete this._hashersByName[r.name],delete this._hashersByCode[r.code]}async getHasher(r){let t=typeof r=="string"?this._hashersByName:this._hashersByCode;if(t[r])return t[r];let n=await this._loadHasher(r);return t[r]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}};var In={};z(In,{code:()=>Nd,createLink:()=>Is,createNode:()=>Us,decode:()=>Rd,encode:()=>Dd,name:()=>_d,prepare:()=>Bn,validate:()=>Un});var $p=ls,us=128,jp=127,zp=~jp,Mp=Math.pow(2,31);function ls(e,r,t){r=r||[],t=t||0;for(var n=t;e>=Mp;)r[t++]=e&255|us,e/=128;for(;e&zp;)r[t++]=e&255|us,e>>>=7;return r[t]=e|0,ls.bytes=t-n+1,r}var qp=bn,Hp=128,fs=127;function bn(e,n){var t=0,n=n||0,o=0,s=n,i,a=e.length;do{if(s>=a)throw bn.bytes=0,new RangeError("Could not decode varint");i=e[s++],t+=o<28?(i&fs)<<o:(i&fs)*Math.pow(2,o),o+=7}while(i>=Hp);return bn.bytes=s-n,t}var Vp=Math.pow(2,7),Gp=Math.pow(2,14),Wp=Math.pow(2,21),Jp=Math.pow(2,28),Kp=Math.pow(2,35),Xp=Math.pow(2,42),Qp=Math.pow(2,49),Zp=Math.pow(2,56),Yp=Math.pow(2,63),ed=function(e){return e<Vp?1:e<Gp?2:e<Wp?3:e<Jp?4:e<Kp?5:e<Xp?6:e<Qp?7:e<Zp?8:e<Yp?9:10},rd={encode:$p,decode:qp,encodingLength:ed},td=rd,Nr=td;var Dr=(e,r=0)=>[Nr.decode(e,r),Nr.decode.bytes],or=(e,r,t=0)=>(Nr.encode(e,r,t),r),sr=e=>Nr.encodingLength(e);var dw=new Uint8Array(0);var ps=(e,r)=>{if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0},ye=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var ds=e=>new TextEncoder().encode(e),ms=e=>new TextDecoder().decode(e);var je=(e,r)=>{let t=r.byteLength,n=sr(e),o=n+sr(t),s=new Uint8Array(o+t);return or(e,s,0),or(t,s,n),s.set(r,o),new ir(e,t,r,s)},Ke=e=>{let r=ye(e),[t,n]=Dr(r),[o,s]=Dr(r.subarray(n)),i=r.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new ir(t,o,i,r)},ys=(e,r)=>{if(e===r)return!0;{let t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&ps(e.bytes,t.bytes)}},ir=class{constructor(r,t,n,o){this.code=r,this.size=t,this.digest=n,this.bytes=o}};var Tn={};z(Tn,{base58btc:()=>M,base58flickr:()=>cd});function nd(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=o}var a=e.length,c=e.charAt(0),p=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function y(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var k=0,I=0,j=0,K=A.length;j!==K&&A[j]===0;)j++,k++;for(var ie=(K-j)*d+1>>>0,V=new Uint8Array(ie);j!==K;){for(var he=A[j],ae=0,Y=ie-1;(he!==0||ae<I)&&Y!==-1;Y--,ae++)he+=256*V[Y]>>>0,V[Y]=he%a>>>0,he=he/a>>>0;if(he!==0)throw new Error("Non-zero carry");I=ae,j++}for(var ce=ie-I;ce!==ie&&V[ce]===0;)ce++;for(var nr=c.repeat(k);ce<ie;++ce)nr+=e.charAt(V[ce]);return nr}function x(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var k=0;if(A[k]!==" "){for(var I=0,j=0;A[k]===c;)I++,k++;for(var K=(A.length-k)*p+1>>>0,ie=new Uint8Array(K);A[k];){var V=t[A.charCodeAt(k)];if(V===255)return;for(var he=0,ae=K-1;(V!==0||he<j)&&ae!==-1;ae--,he++)V+=a*ie[ae]>>>0,ie[ae]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");j=he,k++}if(A[k]!==" "){for(var Y=K-j;Y!==K&&ie[Y]===0;)Y++;for(var ce=new Uint8Array(I+(K-Y)),nr=I;Y!==K;)ce[nr++]=ie[Y++];return ce}}}function _(A){var k=x(A);if(k)return k;throw new Error(`Non-${r} character`)}return{encode:y,decodeUnsafe:x,decode:_}}var od=nd,sd=od,gs=sd;var xn=class{constructor(r,t,n){this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},Sn=class{constructor(r,t,n){if(this.name=r,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return ws(this,r)}},En=class{constructor(r){this.decoders=r}or(r){return ws(this,r)}decode(r){let t=r[0],n=this.decoders[t];if(n)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ws=(e,r)=>new En({...e.decoders||{[e.prefix]:e},...r.decoders||{[r.prefix]:r}}),Pn=class{constructor(r,t,n,o){this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new xn(r,t,n),this.decoder=new Sn(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}},ar=({name:e,prefix:r,encode:t,decode:n})=>new Pn(e,r,t,n),ze=({prefix:e,name:r,alphabet:t})=>{let{encode:n,decode:o}=gs(t,r);return ar({prefix:e,name:r,encode:n,decode:s=>ye(o(s))})},id=(e,r,t,n)=>{let o={};for(let d=0;d<r.length;++d)o[r[d]]=d;let s=e.length;for(;e[s-1]==="=";)--s;let i=new Uint8Array(s*t/8|0),a=0,c=0,p=0;for(let d=0;d<s;++d){let y=o[e[d]];if(y===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|y,a+=t,a>=8&&(a-=8,i[p++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return i},ad=(e,r,t)=>{let n=r[r.length-1]==="=",o=(1<<t)-1,s="",i=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],i+=8;i>t;)i-=t,s+=r[o&a>>i];if(i&&(s+=r[o&a<<t-i]),n)for(;s.length*t&7;)s+="=";return s},N=({name:e,prefix:r,bitsPerChar:t,alphabet:n})=>ar({prefix:r,name:e,encode(o){return ad(o,n,t)},decode(o){return id(o,n,t,e)}});var M=ze({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),cd=ze({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var An={};z(An,{base32:()=>ge,base32hex:()=>pd,base32hexpad:()=>md,base32hexpadupper:()=>hd,base32hexupper:()=>dd,base32pad:()=>fd,base32padupper:()=>ld,base32upper:()=>ud,base32z:()=>yd});var ge=N({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ud=N({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),fd=N({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ld=N({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pd=N({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dd=N({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),md=N({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hd=N({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yd=N({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var bs=(e,r)=>{let{bytes:t,version:n}=e;switch(n){case 0:return wd(t,Cn(e),r||M.encoder);default:return bd(t,Cn(e),r||ge.encoder)}};var xs=new WeakMap,Cn=e=>{let r=xs.get(e);if(r==null){let t=new Map;return xs.set(e,t),t}return r},m=class{constructor(r,t,n,o){this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:r,multihash:t}=this;if(r!==Rr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==xd)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return m.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:r,digest:t}=this.multihash,n=je(r,t);return m.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return m.equals(this,r)}static equals(r,t){let n=t;return n&&r.code===n.code&&r.version===n.version&&ys(r.multihash,n.multihash)}toString(r){return bs(this,r)}toJSON(){return{"/":bs(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;let t=r;if(t instanceof m)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:o,multihash:s,bytes:i}=t;return new m(n,o,s,i||Ss(n,o,s.bytes))}else if(t[Sd]===!0){let{version:n,multihash:o,code:s}=t,i=Ke(o);return m.create(n,s,i)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==Rr)throw new Error(`Version 0 CID must use dag-pb (code: ${Rr}) block encoding`);return new m(r,t,n,n.bytes)}case 1:{let o=Ss(r,t,n.bytes);return new m(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return m.create(0,Rr,r)}static createV1(r,t){return m.create(1,r,t)}static decode(r){let[t,n]=m.decodeFirst(r);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(r){let t=m.inspectBytes(r),n=t.size-t.multihashSize,o=ye(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");let s=o.subarray(t.multihashSize-t.digestSize),i=new ir(t.multihashCode,t.digestSize,s,o);return[t.version===0?m.createV0(i):m.createV1(t.codec,i),r.subarray(t.size)]}static inspectBytes(r){let t=0,n=()=>{let[y,x]=Dr(r.subarray(t));return t+=x,y},o=n(),s=Rr;if(o===18?(o=0,t=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=t,a=n(),c=n(),p=t+c,d=p-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:d,size:p}}static parse(r,t){let[n,o]=gd(r,t),s=m.decode(o);return Cn(s).set(n,r),s}},gd=(e,r)=>{switch(e[0]){case"Q":{let t=r||M;return[M.prefix,t.decode(`${M.prefix}${e}`)]}case M.prefix:{let t=r||M;return[M.prefix,t.decode(e)]}case ge.prefix:{let t=r||ge;return[ge.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}},wd=(e,r,t)=>{let{prefix:n}=t;if(n!==M.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let o=r.get(n);if(o==null){let s=t.encode(e).slice(1);return r.set(n,s),s}else return o},bd=(e,r,t)=>{let{prefix:n}=t,o=r.get(n);if(o==null){let s=t.encode(e);return r.set(n,s),s}else return o},Rr=112,xd=18,Ss=(e,r,t)=>{let n=sr(e),o=n+sr(r),s=new Uint8Array(o+t.byteLength);return or(e,s,0),or(r,s,n),s.set(t,o),s},Sd=Symbol.for("@ipld/js-cid/CID");var Ed=new TextDecoder;function vn(e,r){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(r>=e.length)throw new Error("protobuf: unexpected end of data");let o=e[r++];if(t+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[t,r]}function ht(e,r){let t;[t,r]=vn(e,r);let n=r+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(r,n),n]}function Es(e,r){let t;return[t,r]=vn(e,r),[t&7,t>>3,r]}function Pd(e){let r={},t=e.length,n=0;for(;n<t;){let o,s;if([o,s,n]=Es(e,n),s===1){if(r.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(r.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[r.Hash,n]=ht(e,n)}else if(s===2){if(r.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=ht(e,n),r.Name=Ed.decode(i)}else if(s===3){if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[r.Tsize,n]=vn(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return r}function Ps(e){let r=e.length,t=0,n,o=!1,s;for(;t<r;){let a,c;if([a,c,t]=Es(e,t),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,t]=ht(e,t),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let p;[p,t]=ht(e,t),n.push(Pd(p))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(t>r)throw new Error("protobuf: (PBNode) unexpected end of data");let i={};return s&&(i.Data=s),i.Links=n||[],i}var As=new TextEncoder,Ts=2**32,Td=2**31;function Ad(e,r){let t=r.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t=Or(r,t,e.Tsize)-1,r[t]=24}if(typeof e.Name=="string"){let n=As.encode(e.Name);t-=n.length,r.set(n,t),t=Or(r,t,n.length)-1,r[t]=18}return e.Hash&&(t-=e.Hash.length,r.set(e.Hash,t),t=Or(r,t,e.Hash.length)-1,r[t]=10),r.length-t}function Cs(e){let r=vd(e),t=new Uint8Array(r),n=r;if(e.Data&&(n-=e.Data.length,t.set(e.Data,n),n=Or(t,n,e.Data.length)-1,t[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){let s=Ad(e.Links[o],t.subarray(0,n));n-=s,n=Or(t,n,s)-1,t[n]=18}return t}function Cd(e){let r=0;if(e.Hash){let t=e.Hash.length;r+=1+t+cr(t)}if(typeof e.Name=="string"){let t=As.encode(e.Name).length;r+=1+t+cr(t)}return typeof e.Tsize=="number"&&(r+=1+cr(e.Tsize)),r}function vd(e){let r=0;if(e.Data){let t=e.Data.length;r+=1+t+cr(t)}if(e.Links)for(let t of e.Links){let n=Cd(t);r+=1+n+cr(n)}return r}function Or(e,r,t){r-=cr(t);let n=r;for(;t>=Td;)e[r++]=t&127|128,t/=128;for(;t>=128;)e[r++]=t&127|128,t>>>=7;return e[r]=t,n}function cr(e){return e%2===0&&e++,Math.floor((kd(e)+6)/7)}function kd(e){let r=0;return e>=Ts&&(e=Math.floor(e/Ts),r=32),e>=1<<16&&(e>>>=16,r+=16),e>=1<<8&&(e>>>=8,r+=8),r+Bd[e]}var Bd=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var Ud=["Data","Links"],Id=["Hash","Name","Tsize"],kn=new TextEncoder;function ks(e,r){if(e===r)return 0;let t=e.Name?kn.encode(e.Name):[],n=r.Name?kn.encode(r.Name):[],o=t.length,s=n.length;for(let i=0,a=Math.min(o,s);i<a;++i)if(t[i]!==n[i]){o=t[i],s=n[i];break}return o<s?-1:s<o?1:0}function vs(e,r){return!Object.keys(e).some(t=>!r.includes(t))}function Bs(e){if(typeof e.asCID=="object"){let t=m.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let r={};if(e.Hash){let t=m.asCID(e.Hash);try{t||(typeof e.Hash=="string"?t=m.parse(e.Hash):e.Hash instanceof Uint8Array&&(t=m.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(r.Hash=t)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(r.Name=e.Name),typeof e.Tsize=="number"&&(r.Tsize=e.Tsize),r}function Bn(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let r={};if(e.Data!==void 0)if(typeof e.Data=="string")r.Data=kn.encode(e.Data);else if(e.Data instanceof Uint8Array)r.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))r.Links=e.Links.map(Bs),r.Links.sort(ks);else throw new TypeError("Invalid DAG-PB form");else r.Links=[];return r}function Un(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!vs(e,Ud))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let r=0;r<e.Links.length;r++){let t=e.Links[r];if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!vs(t,Id))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash==null||!t.Hash["/"]||t.Hash["/"]!==t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0){if(typeof t.Tsize!="number"||t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(r>0&&ks(t,e.Links[r-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Us(e,r=[]){return Bn({Data:e,Links:r})}function Is(e,r,t){return Bs({Hash:t,Name:e,Tsize:r})}var _d="dag-pb",Nd=112;function Dd(e){Un(e);let r={};return e.Links&&(r.Links=e.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),e.Data&&(r.Data=e.Data),Cs(r)}function Rd(e){let r=Ps(e),t={};return r.Data&&(t.Data=r.Data),r.Links&&(t.Links=r.Links.map(n=>{let o={};try{o.Hash=m.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),t}var vt={};z(vt,{code:()=>ym,decode:()=>Mn,encode:()=>zn,name:()=>hm});var Od=["string","number","bigint","symbol"],Ld=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function _s(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let r=typeof e;if(Od.includes(r))return r;if(r==="function")return"Function";if(Array.isArray(e))return"Array";if(Fd(e))return"Buffer";let t=$d(e);return t||"Object"}function Fd(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function $d(e){let r=Object.prototype.toString.call(e).slice(8,-1);if(Ld.includes(r))return r}var l=class{constructor(r,t,n){this.major=r,this.majorEncoded=r<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(r){return this.major<r.major?-1:this.major>r.major?1:0}};l.uint=new l(0,"uint",!0);l.negint=new l(1,"negint",!0);l.bytes=new l(2,"bytes",!0);l.string=new l(3,"string",!0);l.array=new l(4,"array",!1);l.map=new l(5,"map",!1);l.tag=new l(6,"tag",!1);l.float=new l(7,"float",!0);l.false=new l(7,"false",!0);l.true=new l(7,"true",!0);l.null=new l(7,"null",!0);l.undefined=new l(7,"undefined",!0);l.break=new l(7,"break",!0);var h=class{constructor(r,t,n){this.type=r,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var ur=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",jd=new TextDecoder,zd=new TextEncoder;function yt(e){return ur&&globalThis.Buffer.isBuffer(e)}function Lr(e){return e instanceof Uint8Array?yt(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var Os=ur?(e,r,t)=>t-r>64?globalThis.Buffer.from(e.subarray(r,t)).toString("utf8"):Ds(e,r,t):(e,r,t)=>t-r>64?jd.decode(e.subarray(r,t)):Ds(e,r,t),gt=ur?e=>e.length>64?globalThis.Buffer.from(e):Ns(e):e=>e.length>64?zd.encode(e):Ns(e),Pe=e=>Uint8Array.from(e),fr=ur?(e,r,t)=>yt(e)?new Uint8Array(e.subarray(r,t)):e.slice(r,t):(e,r,t)=>e.slice(r,t),Ls=ur?(e,r)=>(e=e.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),Lr(globalThis.Buffer.concat(e,r))):(e,r)=>{let t=new Uint8Array(r),n=0;for(let o of e)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},Fs=ur?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function $s(e,r){if(yt(e)&&yt(r))return e.compare(r);for(let t=0;t<e.length;t++)if(e[t]!==r[t])return e[t]<r[t]?-1:1;return 0}function Ns(e,r=1/0){let t,n=e.length,o=null,s=[];for(let i=0;i<n;++i){if(t=e.charCodeAt(i),t>55295&&t<57344){if(!o){if(t>56319){(r-=3)>-1&&s.push(239,191,189);continue}else if(i+1===n){(r-=3)>-1&&s.push(239,191,189);continue}o=t;continue}if(t<56320){(r-=3)>-1&&s.push(239,191,189),o=t;continue}t=(o-55296<<10|t-56320)+65536}else o&&(r-=3)>-1&&s.push(239,191,189);if(o=null,t<128){if((r-=1)<0)break;s.push(t)}else if(t<2048){if((r-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((r-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((r-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function Ds(e,r,t){let n=[];for(;r<t;){let o=e[r],s=null,i=o>239?4:o>223?3:o>191?2:1;if(r+i<=t){let a,c,p,d;switch(i){case 1:o<128&&(s=o);break;case 2:a=e[r+1],(a&192)===128&&(d=(o&31)<<6|a&63,d>127&&(s=d));break;case 3:a=e[r+1],c=e[r+2],(a&192)===128&&(c&192)===128&&(d=(o&15)<<12|(a&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:a=e[r+1],c=e[r+2],p=e[r+3],(a&192)===128&&(c&192)===128&&(p&192)===128&&(d=(o&15)<<18|(a&63)<<12|(c&63)<<6|p&63,d>65535&&d<1114112&&(s=d))}}s===null?(s=65533,i=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),r+=i}return _n(n)}var Rs=4096;function _n(e){let r=e.length;if(r<=Rs)return String.fromCharCode.apply(String,e);let t="",n=0;for(;n<r;)t+=String.fromCharCode.apply(String,e.slice(n,n+=Rs));return t}var Md=256,Fr=class{constructor(r=Md){this.chunkSize=r,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(r){let t=this.chunks[this.chunks.length-1];if(this.cursor+r.length<=this.maxCursor+1){let o=t.length-(this.maxCursor-this.cursor)-1;t.set(r,o)}else{if(t){let o=t.length-(this.maxCursor-this.cursor)-1;o<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,o),this.maxCursor=this.cursor-1)}r.length<64&&r.length<this.chunkSize?(t=Fs(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(r,0)):(this.chunks.push(r),this.maxCursor+=r.length)}this.cursor+=r.length}toBytes(r=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];r&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=fr(n,0,this.cursor)}else t=Ls(this.chunks,this.cursor);return r&&this.reset(),t}};var w="CBOR decode error:",Ue="CBOR encode error:",$r=[];$r[23]=1;$r[24]=2;$r[25]=3;$r[26]=5;$r[27]=9;function Ie(e,r,t){if(e.length-r<t)throw new Error(`${w} not enough data for type`)}var q=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ee(e,r,t){Ie(e,r,1);let n=e[r];if(t.strict===!0&&n<q[0])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);return n}function re(e,r,t){Ie(e,r,2);let n=e[r]<<8|e[r+1];if(t.strict===!0&&n<q[1])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);return n}function te(e,r,t){Ie(e,r,4);let n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];if(t.strict===!0&&n<q[2])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);return n}function ne(e,r,t){Ie(e,r,8);let n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3],o=e[r+4]*16777216+(e[r+5]<<16)+(e[r+6]<<8)+e[r+7],s=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&s<q[3])throw new Error(`${w} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(t.allowBigInt===!0)return s;throw new Error(`${w} integers outside of the safe integer range are not supported`)}function js(e,r,t,n){return new h(l.uint,ee(e,r+1,n),2)}function zs(e,r,t,n){return new h(l.uint,re(e,r+1,n),3)}function Ms(e,r,t,n){return new h(l.uint,te(e,r+1,n),5)}function qs(e,r,t,n){return new h(l.uint,ne(e,r+1,n),9)}function ue(e,r){return G(e,0,r.value)}function G(e,r,t){if(t<q[0]){let n=Number(t);e.push([r|n])}else if(t<q[1]){let n=Number(t);e.push([r|24,n])}else if(t<q[2]){let n=Number(t);e.push([r|25,n>>>8,n&255])}else if(t<q[3]){let n=Number(t);e.push([r|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<q[4]){let o=[r|27,0,0,0,0,0,0,0],s=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=i&255,i=i>>8,o[3]=i&255,i=i>>8,o[2]=i&255,i=i>>8,o[1]=i&255,e.push(o)}else throw new Error(`${w} encountered BigInt larger than allowable range`)}}ue.encodedSize=function(r){return G.encodedSize(r.value)};G.encodedSize=function(r){return r<q[0]?1:r<q[1]?2:r<q[2]?3:r<q[3]?5:9};ue.compareTokens=function(r,t){return r.value<t.value?-1:r.value>t.value?1:0};function Hs(e,r,t,n){return new h(l.negint,-1-ee(e,r+1,n),2)}function Vs(e,r,t,n){return new h(l.negint,-1-re(e,r+1,n),3)}function Gs(e,r,t,n){return new h(l.negint,-1-te(e,r+1,n),5)}var Nn=BigInt(-1),Ws=BigInt(1);function Js(e,r,t,n){let o=ne(e,r+1,n);if(typeof o!="bigint"){let s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new h(l.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${w} integers outside of the safe integer range are not supported`);return new h(l.negint,Nn-BigInt(o),9)}function wt(e,r){let t=r.value,n=typeof t=="bigint"?t*Nn-Ws:t*-1-1;G(e,r.type.majorEncoded,n)}wt.encodedSize=function(r){let t=r.value,n=typeof t=="bigint"?t*Nn-Ws:t*-1-1;return n<q[0]?1:n<q[1]?2:n<q[2]?3:n<q[3]?5:9};wt.compareTokens=function(r,t){return r.value<t.value?1:r.value>t.value?-1:0};function jr(e,r,t,n){Ie(e,r,t+n);let o=fr(e,r+t,r+t+n);return new h(l.bytes,o,t+n)}function Ks(e,r,t,n){return jr(e,r,1,t)}function Xs(e,r,t,n){return jr(e,r,2,ee(e,r+1,n))}function Qs(e,r,t,n){return jr(e,r,3,re(e,r+1,n))}function Zs(e,r,t,n){return jr(e,r,5,te(e,r+1,n))}function Ys(e,r,t,n){let o=ne(e,r+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer bytes lengths not supported`);return jr(e,r,9,o)}function bt(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===l.string?gt(e.value):e.value),e.encodedBytes}function lr(e,r){let t=bt(r);G(e,r.type.majorEncoded,t.length),e.push(t)}lr.encodedSize=function(r){let t=bt(r);return G.encodedSize(t.length)+t.length};lr.compareTokens=function(r,t){return Hd(bt(r),bt(t))};function Hd(e,r){return e.length<r.length?-1:e.length>r.length?1:$s(e,r)}function zr(e,r,t,n,o){let s=t+n;Ie(e,r,s);let i=new h(l.string,Os(e,r+t,r+s),s);return o.retainStringBytes===!0&&(i.byteValue=fr(e,r+t,r+s)),i}function ei(e,r,t,n){return zr(e,r,1,t,n)}function ri(e,r,t,n){return zr(e,r,2,ee(e,r+1,n),n)}function ti(e,r,t,n){return zr(e,r,3,re(e,r+1,n),n)}function ni(e,r,t,n){return zr(e,r,5,te(e,r+1,n),n)}function oi(e,r,t,n){let o=ne(e,r+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer string lengths not supported`);return zr(e,r,9,o,n)}var si=lr;function pr(e,r,t,n){return new h(l.array,n,t)}function ii(e,r,t,n){return pr(e,r,1,t)}function ai(e,r,t,n){return pr(e,r,2,ee(e,r+1,n))}function ci(e,r,t,n){return pr(e,r,3,re(e,r+1,n))}function ui(e,r,t,n){return pr(e,r,5,te(e,r+1,n))}function fi(e,r,t,n){let o=ne(e,r+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer array lengths not supported`);return pr(e,r,9,o)}function li(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${w} indefinite length items not allowed`);return pr(e,r,1,1/0)}function xt(e,r){G(e,l.array.majorEncoded,r.value)}xt.compareTokens=ue.compareTokens;xt.encodedSize=function(r){return G.encodedSize(r.value)};function dr(e,r,t,n){return new h(l.map,n,t)}function pi(e,r,t,n){return dr(e,r,1,t)}function di(e,r,t,n){return dr(e,r,2,ee(e,r+1,n))}function mi(e,r,t,n){return dr(e,r,3,re(e,r+1,n))}function hi(e,r,t,n){return dr(e,r,5,te(e,r+1,n))}function yi(e,r,t,n){let o=ne(e,r+1,n);if(typeof o=="bigint")throw new Error(`${w} 64-bit integer map lengths not supported`);return dr(e,r,9,o)}function gi(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${w} indefinite length items not allowed`);return dr(e,r,1,1/0)}function St(e,r){G(e,l.map.majorEncoded,r.value)}St.compareTokens=ue.compareTokens;St.encodedSize=function(r){return G.encodedSize(r.value)};function wi(e,r,t,n){return new h(l.tag,t,1)}function bi(e,r,t,n){return new h(l.tag,ee(e,r+1,n),2)}function xi(e,r,t,n){return new h(l.tag,re(e,r+1,n),3)}function Si(e,r,t,n){return new h(l.tag,te(e,r+1,n),5)}function Ei(e,r,t,n){return new h(l.tag,ne(e,r+1,n),9)}function Et(e,r){G(e,l.tag.majorEncoded,r.value)}Et.compareTokens=ue.compareTokens;Et.encodedSize=function(r){return G.encodedSize(r.value)};var Xd=20,Qd=21,Zd=22,Yd=23;function Pi(e,r,t,n){if(n.allowUndefined===!1)throw new Error(`${w} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new h(l.null,null,1):new h(l.undefined,void 0,1)}function Ti(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${w} indefinite length items not allowed`);return new h(l.break,void 0,1)}function Dn(e,r,t){if(t){if(t.allowNaN===!1&&Number.isNaN(e))throw new Error(`${w} NaN values are not supported`);if(t.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${w} Infinity values are not supported`)}return new h(l.float,e,r)}function Ai(e,r,t,n){return Dn(Rn(e,r+1),3,n)}function Ci(e,r,t,n){return Dn(On(e,r+1),5,n)}function vi(e,r,t,n){return Dn(Ii(e,r+1),9,n)}function Pt(e,r,t){let n=r.value;if(n===!1)e.push([l.float.majorEncoded|Xd]);else if(n===!0)e.push([l.float.majorEncoded|Qd]);else if(n===null)e.push([l.float.majorEncoded|Zd]);else if(n===void 0)e.push([l.float.majorEncoded|Yd]);else{let o,s=!1;(!t||t.float64!==!0)&&(Bi(n),o=Rn(we,1),n===o||Number.isNaN(n)?(we[0]=249,e.push(we.slice(0,3)),s=!0):(Ui(n),o=On(we,1),n===o&&(we[0]=250,e.push(we.slice(0,5)),s=!0))),s||(em(n),o=Ii(we,1),we[0]=251,e.push(we.slice(0,9)))}}Pt.encodedSize=function(r,t){let n=r.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){Bi(n);let o=Rn(we,1);if(n===o||Number.isNaN(n))return 3;if(Ui(n),o=On(we,1),n===o)return 5}return 9};var ki=new ArrayBuffer(9),fe=new DataView(ki,1),we=new Uint8Array(ki,0);function Bi(e){if(e===1/0)fe.setUint16(0,31744,!1);else if(e===-1/0)fe.setUint16(0,64512,!1);else if(Number.isNaN(e))fe.setUint16(0,32256,!1);else{fe.setFloat32(0,e);let r=fe.getUint32(0),t=(r&2139095040)>>23,n=r&8388607;if(t===255)fe.setUint16(0,31744,!1);else if(t===0)fe.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let o=t-127;o<-24?fe.setUint16(0,0):o<-14?fe.setUint16(0,(r&2147483648)>>16|1<<24+o,!1):fe.setUint16(0,(r&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Rn(e,r){if(e.length-r<2)throw new Error(`${w} not enough data for float16`);let t=(e[r]<<8)+e[r+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,o=t&1023,s;return n===0?s=o*2**-24:n!==31?s=(o+1024)*2**(n-25):s=o===0?1/0:NaN,t&32768?-s:s}function Ui(e){fe.setFloat32(0,e,!1)}function On(e,r){if(e.length-r<4)throw new Error(`${w} not enough data for float32`);let t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,4).getFloat32(0,!1)}function em(e){fe.setFloat64(0,e,!1)}function Ii(e,r){if(e.length-r<8)throw new Error(`${w} not enough data for float64`);let t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,8).getFloat64(0,!1)}Pt.compareTokens=ue.compareTokens;function v(e,r,t){throw new Error(`${w} encountered invalid minor (${t}) for major ${e[r]>>>5}`)}function Tt(e){return()=>{throw new Error(`${w} ${e}`)}}var g=[];for(let e=0;e<=23;e++)g[e]=v;g[24]=js;g[25]=zs;g[26]=Ms;g[27]=qs;g[28]=v;g[29]=v;g[30]=v;g[31]=v;for(let e=32;e<=55;e++)g[e]=v;g[56]=Hs;g[57]=Vs;g[58]=Gs;g[59]=Js;g[60]=v;g[61]=v;g[62]=v;g[63]=v;for(let e=64;e<=87;e++)g[e]=Ks;g[88]=Xs;g[89]=Qs;g[90]=Zs;g[91]=Ys;g[92]=v;g[93]=v;g[94]=v;g[95]=Tt("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)g[e]=ei;g[120]=ri;g[121]=ti;g[122]=ni;g[123]=oi;g[124]=v;g[125]=v;g[126]=v;g[127]=Tt("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)g[e]=ii;g[152]=ai;g[153]=ci;g[154]=ui;g[155]=fi;g[156]=v;g[157]=v;g[158]=v;g[159]=li;for(let e=160;e<=183;e++)g[e]=pi;g[184]=di;g[185]=mi;g[186]=hi;g[187]=yi;g[188]=v;g[189]=v;g[190]=v;g[191]=gi;for(let e=192;e<=215;e++)g[e]=wi;g[216]=bi;g[217]=xi;g[218]=Si;g[219]=Ei;g[220]=v;g[221]=v;g[222]=v;g[223]=v;for(let e=224;e<=243;e++)g[e]=Tt("simple values are not supported");g[244]=v;g[245]=v;g[246]=v;g[247]=Pi;g[248]=Tt("simple values are not supported");g[249]=Ai;g[250]=Ci;g[251]=vi;g[252]=v;g[253]=v;g[254]=v;g[255]=Ti;var be=[];for(let e=0;e<24;e++)be[e]=new h(l.uint,e,1);for(let e=-1;e>=-24;e--)be[31-e]=new h(l.negint,e,1);be[64]=new h(l.bytes,new Uint8Array(0),1);be[96]=new h(l.string,"",1);be[128]=new h(l.array,0,1);be[160]=new h(l.map,0,1);be[244]=new h(l.false,!1,1);be[245]=new h(l.true,!0,1);be[246]=new h(l.null,null,1);function _i(e){switch(e.type){case l.false:return Pe([244]);case l.true:return Pe([245]);case l.null:return Pe([246]);case l.bytes:return e.value.length?void 0:Pe([64]);case l.string:return e.value===""?Pe([96]):void 0;case l.array:return e.value===0?Pe([128]):void 0;case l.map:return e.value===0?Pe([160]):void 0;case l.uint:return e.value<24?Pe([Number(e.value)]):void 0;case l.negint:if(e.value>=-24)return Pe([31-Number(e.value)])}}var tm={float64:!1,mapSorter:sm,quickEncodeToken:_i};function nm(){let e=[];return e[l.uint.major]=ue,e[l.negint.major]=wt,e[l.bytes.major]=lr,e[l.string.major]=si,e[l.array.major]=xt,e[l.map.major]=St,e[l.tag.major]=Et,e[l.float.major]=Pt,e}var Ni=nm(),Ln=new Fr,mr=class{constructor(r,t){this.obj=r,this.parent=t}includes(r){let t=this;do if(t.obj===r)return!0;while(t=t.parent);return!1}static createCheck(r,t){if(r&&r.includes(t))throw new Error(`${Ue} object contains circular references`);return new mr(t,r)}},Me={null:new h(l.null,null),undefined:new h(l.undefined,void 0),true:new h(l.true,!0),false:new h(l.false,!1),emptyArray:new h(l.array,0),emptyMap:new h(l.map,0)},qe={number(e,r,t,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new h(l.float,e):e>=0?new h(l.uint,e):new h(l.negint,e)},bigint(e,r,t,n){return e>=BigInt(0)?new h(l.uint,e):new h(l.negint,e)},Uint8Array(e,r,t,n){return new h(l.bytes,e)},string(e,r,t,n){return new h(l.string,e)},boolean(e,r,t,n){return e?Me.true:Me.false},null(e,r,t,n){return Me.null},undefined(e,r,t,n){return Me.undefined},ArrayBuffer(e,r,t,n){return new h(l.bytes,new Uint8Array(e))},DataView(e,r,t,n){return new h(l.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,r,t,n){if(!e.length)return t.addBreakTokens===!0?[Me.emptyArray,new h(l.break)]:Me.emptyArray;n=mr.createCheck(n,e);let o=[],s=0;for(let i of e)o[s++]=At(i,t,n);return t.addBreakTokens?[new h(l.array,e.length),o,new h(l.break)]:[new h(l.array,e.length),o]},Object(e,r,t,n){let o=r!=="Object",s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return t.addBreakTokens===!0?[Me.emptyMap,new h(l.break)]:Me.emptyMap;n=mr.createCheck(n,e);let a=[],c=0;for(let p of s)a[c++]=[At(p,t,n),At(o?e.get(p):e[p],t,n)];return om(a,t),t.addBreakTokens?[new h(l.map,i),a,new h(l.break)]:[new h(l.map,i),a]}};qe.Map=qe.Object;qe.Buffer=qe.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))qe[`${e}Array`]=qe.DataView;function At(e,r={},t){let n=_s(e),o=r&&r.typeEncoders&&r.typeEncoders[n]||qe[n];if(typeof o=="function"){let i=o(e,n,r,t);if(i!=null)return i}let s=qe[n];if(!s)throw new Error(`${Ue} unsupported type: ${n}`);return s(e,n,r,t)}function om(e,r){r.mapSorter&&e.sort(r.mapSorter)}function sm(e,r){let t=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(r[0])?r[0][0]:r[0];if(t.type!==n.type)return t.type.compare(n.type);let o=t.type.major,s=Ni[o].compareTokens(t,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function Di(e,r,t,n){if(Array.isArray(r))for(let o of r)Di(e,o,t,n);else t[r.type.major](e,r,n)}function Fn(e,r,t){let n=At(e,t);if(!Array.isArray(n)&&t.quickEncodeToken){let o=t.quickEncodeToken(n);if(o)return o;let s=r[n.type.major];if(s.encodedSize){let i=s.encodedSize(n,t),a=new Fr(i);if(s(a,n,t),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Lr(a.chunks[0])}}return Ln.reset(),Di(Ln,n,r,t),Ln.toBytes(!0)}function $n(e,r){return r=Object.assign({},tm,r),Fn(e,Ni,r)}var im={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},jn=class{constructor(r,t={}){this.pos=0,this.data=r,this.options=t}done(){return this.pos>=this.data.length}next(){let r=this.data[this.pos],t=be[r];if(t===void 0){let n=g[r];if(!n)throw new Error(`${w} no decoder for major type ${r>>>5} (byte 0x${r.toString(16).padStart(2,"0")})`);let o=r&31;t=n(this.data,this.pos,o,this.options)}return this.pos+=t.encodedLength,t}},Mr=Symbol.for("DONE"),Ct=Symbol.for("BREAK");function am(e,r,t){let n=[];for(let o=0;o<e.value;o++){let s=qr(r,t);if(s===Ct){if(e.value===1/0)break;throw new Error(`${w} got unexpected break to lengthed array`)}if(s===Mr)throw new Error(`${w} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=s}return n}function cm(e,r,t){let n=t.useMaps===!0,o=n?void 0:{},s=n?new Map:void 0;for(let i=0;i<e.value;i++){let a=qr(r,t);if(a===Ct){if(e.value===1/0)break;throw new Error(`${w} got unexpected break to lengthed map`)}if(a===Mr)throw new Error(`${w} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${w} non-string keys not supported (got ${typeof a})`);if(t.rejectDuplicateMapKeys===!0&&(n&&s.has(a)||!n&&a in o))throw new Error(`${w} found repeat map key "${a}"`);let c=qr(r,t);if(c===Mr)throw new Error(`${w} found map but not enough entries (got ${i} [no value], expected ${e.value})`);n?s.set(a,c):o[a]=c}return n?s:o}function qr(e,r){if(e.done())return Mr;let t=e.next();if(t.type===l.break)return Ct;if(t.type.terminal)return t.value;if(t.type===l.array)return am(t,e,r);if(t.type===l.map)return cm(t,e,r);if(t.type===l.tag){if(r.tags&&typeof r.tags[t.value]=="function"){let n=qr(e,r);return r.tags[t.value](n)}throw new Error(`${w} tag not supported (${t.value})`)}throw new Error("unsupported")}function Hr(e,r){if(!(e instanceof Uint8Array))throw new Error(`${w} data to decode must be a Uint8Array`);r=Object.assign({},im,r);let t=r.tokenizer||new jn(e,r),n=qr(t,r);if(n===Mr)throw new Error(`${w} did not find any content to decode`);if(n===Ct)throw new Error(`${w} got unexpected break`);if(!t.done())throw new Error(`${w} too many terminals, data makes no sense`);return n}var Ri=42;function fm(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;let r=m.asCID(e);if(!r)return null;let t=new Uint8Array(r.bytes.byteLength+1);return t.set(r.bytes,1),[new h(l.tag,Ri),new h(l.bytes,t)]}function lm(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function pm(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var dm={float64:!0,typeEncoders:{Object:fm,undefined:lm,number:pm}};function mm(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return m.decode(e.subarray(1))}var Oi={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Oi.tags[Ri]=mm;var hm="dag-cbor",ym=113,zn=e=>$n(e,dm),Mn=e=>Hr(e,Oi);var Qn={};z(Qn,{code:()=>vm,decode:()=>ji,encode:()=>$i,format:()=>km,name:()=>Cm,parse:()=>Um,stringify:()=>km});var Hn=({name:e,code:r,encode:t})=>new qn(e,r,t),qn=class{constructor(r,t,n){this.name=r,this.code=t,this.encode=n}digest(r){if(r instanceof Uint8Array){let t=this.encode(r);return t instanceof Uint8Array?je(this.code,t):t.then(n=>je(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Vn={};z(Vn,{base64:()=>hr,base64pad:()=>gm,base64url:()=>He,base64urlpad:()=>wm});var hr=N({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),gm=N({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),He=N({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wm=N({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Gn=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(r){let t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===l.array&&(t.elements++,t.elements!==1&&r.push([44])),t.type===l.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?r.push([44]):r.push([58]))))}[l.uint.major](r,t){this.prefix(r);let n=String(t.value),o=[];for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);r.push(o)}[l.negint.major](r,t){this[l.uint.major](r,t)}[l.bytes.major](r,t){throw new Error(`${Ue} unsupported type: Uint8Array`)}[l.string.major](r,t){this.prefix(r);let n=gt(JSON.stringify(t.value));r.push(n.length>32?Lr(n):n)}[l.array.major](r,t){this.prefix(r),this.inRecursive.push({type:l.array,elements:0}),r.push([91])}[l.map.major](r,t){this.prefix(r),this.inRecursive.push({type:l.map,elements:0}),r.push([123])}[l.tag.major](r,t){}[l.float.major](r,t){if(t.type.name==="break"){let i=this.inRecursive.pop();if(i){if(i.type===l.array)r.push([93]);else if(i.type===l.map)r.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${Ue} unsupported type: undefined`);if(this.prefix(r),t.type.name==="true"){r.push([116,114,117,101]);return}else if(t.type.name==="false"){r.push([102,97,108,115,101]);return}else if(t.type.name==="null"){r.push([110,117,108,108]);return}let n=String(t.value),o=[],s=!1;for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i),!s&&(o[i]===46||o[i]===101||o[i]===69)&&(s=!0);s||(o.push(46),o.push(48)),r.push(o)}};function bm(e,r){if(Array.isArray(e[0])||Array.isArray(r[0]))throw new Error(`${Ue} complex map keys are not supported`);let t=e[0],n=r[0];if(t.type!==l.string||n.type!==l.string)throw new Error(`${Ue} non-string map keys are not supported`);if(t<n)return-1;if(t>n)return 1;throw new Error(`${Ue} unexpected duplicate map keys, this is not supported`)}var xm={addBreakTokens:!0,mapSorter:bm};function Wn(e,r){return r=Object.assign({},xm,r),Fn(e,new Gn,r)}var yr=class{constructor(r,t={}){this.pos=0,this.data=r,this.options=t,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let r=this.ch();for(;r===32||r===9||r===13||r===10;)r=this.data[++this.pos]}expect(r){if(this.data.length-this.pos<r.length)throw new Error(`${w} unexpected end of input at position ${this.pos}`);for(let t=0;t<r.length;t++)if(this.data[this.pos++]!==r[t])throw new Error(`${w} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...r)}'`)}parseNumber(){let r=this.pos,t=!1,n=!1,o=a=>{for(;!this.done();){let c=this.ch();if(a.includes(c))this.pos++;else break}};if(this.ch()===45&&(t=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,n=!0;else return new h(l.uint,0,this.pos-r);if(o([48,49,50,51,52,53,54,55,56,57]),t&&this.pos===r+1)throw new Error(`${w} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${w} unexpected token at position ${this.pos}`);n=!0,this.pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,o([48,49,50,51,52,53,54,55,56,57]));let s=String.fromCharCode.apply(null,this.data.subarray(r,this.pos)),i=parseFloat(s);return n?new h(l.float,i,this.pos-r):this.options.allowBigInt!==!0||Number.isSafeInteger(i)?new h(i>=0?l.uint:l.negint,i,this.pos-r):new h(i>=0?l.uint:l.negint,BigInt(s),this.pos-r)}parseString(){if(this.ch()!==34)throw new Error(`${w} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let s=this.pos,i=0;s<this.data.length&&i<65536;s++,i++){let a=this.data[s];if(a===92||a<32||a>=128)break;if(a===34){let c=String.fromCharCode.apply(null,this.data.subarray(this.pos,s));return this.pos=s+1,new h(l.string,c,i)}}let r=this.pos,t=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`${w} unexpected end of unicode escape sequence at position ${this.pos}`);let s=0;for(let i=0;i<4;i++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${w} unexpected unicode escape character at position ${this.pos}`);s=s*16+a,this.pos++}return s},o=()=>{let s=this.ch(),i=null,a=s>239?4:s>223?3:s>191?2:1;if(this.pos+a>this.data.length)throw new Error(`${w} unexpected unicode sequence at position ${this.pos}`);let c,p,d,y;switch(a){case 1:s<128&&(i=s);break;case 2:c=this.data[this.pos+1],(c&192)===128&&(y=(s&31)<<6|c&63,y>127&&(i=y));break;case 3:c=this.data[this.pos+1],p=this.data[this.pos+2],(c&192)===128&&(p&192)===128&&(y=(s&15)<<12|(c&63)<<6|p&63,y>2047&&(y<55296||y>57343)&&(i=y));break;case 4:c=this.data[this.pos+1],p=this.data[this.pos+2],d=this.data[this.pos+3],(c&192)===128&&(p&192)===128&&(d&192)===128&&(y=(s&15)<<18|(c&63)<<12|(p&63)<<6|d&63,y>65535&&y<1114112&&(i=y))}i===null?(i=65533,a=1):i>65535&&(i-=65536,t.push(i>>>10&1023|55296),i=56320|i&1023),t.push(i),this.pos+=a};for(;!this.done();){let s=this.ch(),i;switch(s){case 92:if(this.pos++,this.done())throw new Error(`${w} unexpected string termination at position ${this.pos}`);switch(i=this.ch(),this.pos++,i){case 34:case 39:case 92:case 47:t.push(i);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${w} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new h(l.string,_n(t),this.pos-r);default:if(s<32)throw new Error(`${w} invalid control character at position ${this.pos}`);s<128?(t.push(s),this.pos++):o()}}throw new Error(`${w} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new h(l.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new h(l.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new h(l.null,null,4);case 102:return this.expect([102,97,108,115,101]),new h(l.false,!1,5);case 116:return this.expect([116,114,117,101]),new h(l.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${w} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new h(l.break,void 0,1);if(this.ch()!==44)throw new Error(`${w} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new h(l.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new h(l.break,void 0,1);if(this.ch()!==44)throw new Error(`${w} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new h(l.break,void 0,1);let r=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${w} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),r}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${w} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}};function Jn(e,r){return r=Object.assign({tokenizer:new yr(e,r)},r),Hr(e,r)}function Em(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;let r=m.asCID(e);if(!r)return null;let t=r.toString();return[new h(l.map,1/0,1),new h(l.string,"/",1),new h(l.string,t,t.length),new h(l.break,void 0,1)]}function Fi(e){let r=hr.encode(e).slice(1);return[new h(l.map,1/0,1),new h(l.string,"/",1),new h(l.map,1/0,1),new h(l.string,"bytes",5),new h(l.string,r,r.length),new h(l.break,void 0,1),new h(l.break,void 0,1)]}function Pm(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Tm(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Am={typeEncoders:{Object:Em,Uint8Array:Fi,Buffer:Fi,undefined:Pm,number:Tm}},Kn=class extends yr{constructor(r,t){super(r,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let r=this._next();if(r.type===l.map){let t=this._next();if(t.type===l.string&&t.value==="/"){let n=this._next();if(n.type===l.string){if(this._next().type!==l.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new h(l.tag,42,0)}if(n.type===l.map){let o=this._next();if(o.type===l.string&&o.value==="bytes"){let s=this._next();if(s.type===l.string){for(let a=0;a<2;a++)if(this._next().type!==l.break)throw new Error("Invalid encoded Bytes form");let i=hr.decode(`m${s.value}`);return new h(l.bytes,i,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}return r}},Xn={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Xn.tags[42]=m.parse;var Cm="dag-json",vm=297,$i=e=>Wn(e,Am),ji=e=>{let r=Object.assign(Xn,{tokenizer:new Kn(e,Xn)});return Jn(e,r)},km=e=>Bm.decode($i(e));var Bm=new TextDecoder,Um=e=>ji(Im.encode(e)),Im=new TextEncoder;var Zn={};z(Zn,{code:()=>$m,decode:()=>qm,encode:()=>Mm,name:()=>Fm,toGeneral:()=>Ki});function xe(e){return He.encode(e).slice(1)}function le(e){return He.decode(`u${e}`)}function zi(e){let[r,t,n]=e;return{payload:t,signatures:[{protected:r,signature:n}],link:m.decode(le(t))}}function _m(e){let r={signature:le(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=le(e.protected)),r}function Mi(e){let r=le(e.payload);try{m.decode(r)}catch{throw new Error("Not a valid DagJWS")}return{payload:r,signatures:e.signatures.map(_m)}}function Nm(e){let r={signature:xe(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=xe(e.protected)),r}function qi(e){let r={payload:xe(e.payload),signatures:e.signatures.map(Nm)};return r.link=m.decode(new Uint8Array(e.payload)),r}function Hi(e){let[r,t,n,o,s]=e,i={ciphertext:o,iv:n,protected:r,tag:s};return t&&(i.recipients=[{encrypted_key:t}]),i}function Rm(e){let r={};return e.encrypted_key&&(r.encrypted_key=le(e.encrypted_key)),e.header&&(r.header=e.header),r}function Vi(e){let r={ciphertext:le(e.ciphertext),protected:le(e.protected),iv:le(e.iv),tag:le(e.tag)};return e.aad&&(r.aad=le(e.aad)),e.recipients&&(r.recipients=e.recipients.map(Rm)),e.unprotected&&(r.unprotected=e.unprotected),r}function Om(e){let r={};return e.encrypted_key&&(r.encrypted_key=xe(e.encrypted_key)),e.header&&(r.header=e.header),r}function Gi(e){let r={ciphertext:xe(e.ciphertext),protected:xe(e.protected),iv:xe(e.iv),tag:xe(e.tag)};return e.aad&&(r.aad=xe(e.aad)),e.recipients&&(r.recipients=e.recipients.map(Om)),e.unprotected&&(r.unprotected=e.unprotected),r}var Fm="dag-jose",$m=133;function Wi(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function jm(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function zm(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function Ji(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function Ki(e){if(typeof e=="string"){let r=e.split(".");if(r.length===3)return zi(r);if(r.length===5)return Hi(r);throw new Error("Not a valid JOSE string")}if(Wi(e)||Ji(e))return e;throw new Error("Not a valid unencoded JOSE object")}function Mm(e){typeof e=="string"&&(e=Ki(e));let r;if(Wi(e))r=Mi(e);else if(Ji(e))r=Vi(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(zn(r))}function qm(e){let r;try{r=Mn(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(jm(r))return qi(r);if(zm(r))return Gi(r);throw new Error("Not a valid DAG-JOSE object")}var Yn={};z(Yn,{identity:()=>Ze});var Xi=0,Hm="identity",Qi=ye,Vm=e=>je(Xi,Qi(e)),Ze={code:Xi,name:Hm,encode:Qi,digest:Vm};var eo={};z(eo,{identity:()=>Gm});var Gm=ar({prefix:"\0",name:"identity",encode:e=>ms(e),decode:e=>ds(e)});var ro={};z(ro,{base2:()=>Wm});var Wm=N({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var to={};z(to,{base8:()=>Jm});var Jm=N({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var no={};z(no,{base10:()=>Km});var Km=ze({prefix:"9",name:"base10",alphabet:"0123456789"});var oo={};z(oo,{base16:()=>Xm,base16upper:()=>Qm});var Xm=N({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Qm=N({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var so={};z(so,{base36:()=>Zm,base36upper:()=>Ym});var Zm=ze({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ym=ze({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var io={};z(io,{base256emoji:()=>oh});var Zi=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),eh=Zi.reduce((e,r,t)=>(e[t]=r,e),[]),rh=Zi.reduce((e,r,t)=>(e[r.codePointAt(0)]=t,e),[]);function th(e){return e.reduce((r,t)=>(r+=eh[t],r),"")}function nh(e){let r=[];for(let t of e){let n=rh[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);r.push(n)}return new Uint8Array(r)}var oh=ar({prefix:"\u{1F680}",name:"base256emoji",encode:th,decode:nh});var ao={};z(ao,{sha256:()=>kt,sha512:()=>sh});var Yi=e=>async r=>new Uint8Array(await crypto.subtle.digest(e,r)),kt=Hn({name:"sha2-256",code:18,encode:Yi("SHA-256")}),sh=Hn({name:"sha2-512",code:19,encode:Yi("SHA-512")});var co={};z(co,{code:()=>ah,decode:()=>uh,encode:()=>ch,name:()=>ih});var ih="raw",ah=85,ch=e=>ye(e),uh=e=>ye(e);var uo={};z(uo,{code:()=>dh,decode:()=>hh,encode:()=>mh,name:()=>ph});var fh=new TextEncoder,lh=new TextDecoder,ph="json",dh=512,mh=e=>fh.encode(JSON.stringify(e)),hh=e=>JSON.parse(lh.decode(e));var Te={...eo,...ro,...to,...no,...oo,...An,...so,...Tn,...Vn,...io},ea={...ao,...Yn},ra={raw:co,json:uo};var Bt=class{index=0;input="";new(r){return this.index=0,this.input=r,this}readAtomically(r){let t=this.index,n=r();return n===void 0&&(this.index=t),n}parseWith(r){let t=r();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(r){return this.readAtomically(()=>{let t=this.readChar();if(t===r)return t})}readSeparator(r,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(r)===void 0))return n()})}readNumber(r,t,n,o){return this.readAtomically(()=>{let s=0,i=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",p=2**(8*o)-1;for(;;){let d=this.readAtomically(()=>{let y=this.readChar();if(y===void 0)return;let x=Number.parseInt(y,r);if(!Number.isNaN(x))return x});if(d===void 0)break;if(s*=r,s+=d,s>p||(i+=1,t!==void 0&&i>t))return}if(i!==0)return!n&&c&&i>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{let r=new Uint8Array(4);for(let t=0;t<r.length;t++){let n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;r[t]=n}return r})}readIPv6Addr(){let r=t=>{for(let n=0;n<t.length/2;n++){let o=n*2;if(n<t.length-3){let i=this.readSeparator(":",n,()=>this.readIPv4Addr());if(i!==void 0)return t[o]=i[0],t[o+1]=i[1],t[o+2]=i[2],t[o+3]=i[3],[o+4,!0]}let s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[o,!1];t[o]=s>>8,t[o+1]=s&255}return[t.length,!1]};return this.readAtomically(()=>{let t=new Uint8Array(16),[n,o]=r(t);if(n===16)return t;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let s=new Uint8Array(14),i=16-(n+2),[a]=r(s.subarray(0,i));return t.set(s.subarray(0,a),16-a),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var ta=45,yh=15,gr=new Bt;function na(e){if(!(e.length>yh))return gr.new(e).parseWith(()=>gr.readIPv4Addr())}function oa(e){if(!(e.length>ta))return gr.new(e).parseWith(()=>gr.readIPv6Addr())}function sa(e){if(!(e.length>ta))return gr.new(e).parseWith(()=>gr.readIPAddr())}function ia(e){return Boolean(na(e))}function aa(e){return Boolean(oa(e))}function Ut(e){return Boolean(sa(e))}function wr(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function It(e=0){return globalThis.Buffer?.allocUnsafe!=null?wr(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ua(e,r,t,n){return{name:e,prefix:r,encoder:{name:e,prefix:r,encode:t},decoder:{decode:n}}}var ca=ua("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),fo=ua("ascii","a",e=>{let r="a";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return r},e=>{e=e.substring(1);let r=It(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}),gh={utf8:ca,"utf-8":ca,hex:Te.base16,latin1:fo,ascii:fo,binary:fo,...Te},_t=gh;function D(e,r="utf8"){let t=_t[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):t.encoder.encode(e).substring(1)}var fa=ia,wh=aa,lo=function(e){let r=0;if(e=e.toString().trim(),fa(e)){let t=new Uint8Array(r+4);return e.split(/\./g).forEach(n=>{t[r++]=parseInt(n,10)&255}),t}if(wh(e)){let t=e.split(":",8),n;for(n=0;n<t.length;n++){let s=fa(t[n]),i;s&&(i=lo(t[n]),t[n]=D(i.slice(0,2),"base16")),i!=null&&++n<8&&t.splice(n,0,D(i.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);let s=[n,1];for(n=9-t.length;n>0;n--)s.push("0");t.splice.apply(t,s)}let o=new Uint8Array(r+16);for(n=0;n<t.length;n++){let s=parseInt(t[n],16);o[r++]=s>>8&255,o[r++]=s&255}return o}throw new Error("invalid ip address")},la=function(e,r=0,t){r=~~r,t=t??e.length-r;let n=new DataView(e.buffer);if(t===4){let o=[];for(let s=0;s<t;s++)o.push(e[r+s]);return o.join(".")}if(t===16){let o=[];for(let s=0;s<t;s+=2)o.push(n.getUint16(r+s).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var Vr={},po={},xh=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];xh.forEach(e=>{let r=Sh(...e);po[r.code]=r,Vr[r.name]=r});function Sh(e,r,t,n,o){return{code:e,size:r,name:t,resolvable:Boolean(n),path:Boolean(o)}}function O(e){if(typeof e=="number"){if(po[e]!=null)return po[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(Vr[e]!=null)return Vr[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var Ae=U(Nt(),1);function oe(e,r="utf8"){let t=_t[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?wr(globalThis.Buffer.from(e,"utf-8")):t.decoder.decode(`${t.prefix}${e}`)}function _e(e,r){r==null&&(r=e.reduce((o,s)=>o+s.length,0));let t=It(r),n=0;for(let o of e)t.set(o,n),n+=o.length;return wr(t)}function Pa(e,r){switch(O(e).code){case 4:case 41:return Oh(r);case 6:case 273:case 33:case 132:return Aa(r).toString();case 53:case 54:case 55:case 56:case 400:case 777:return Fh(r);case 421:return Mh(r);case 444:return Ea(r);case 445:return Ea(r);case 466:return zh(r);default:return D(r,"base16")}}function Ta(e,r){switch(O(e).code){case 4:return Sa(r);case 41:return Sa(r);case 6:case 273:case 33:case 132:return go(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 777:return Lh(r);case 421:return $h(r);case 444:return qh(r);case 445:return Hh(r);case 466:return jh(r);default:return oe(r,"base16")}}var yo=Object.values(Te).map(e=>e.decoder),Rh=function(){let e=yo[0].or(yo[1]);return yo.slice(2).forEach(r=>e=e.or(r)),e}();function Sa(e){if(!Ut(e))throw new Error("invalid ip address");return lo(e)}function Oh(e){let r=la(e,0,e.length);if(r==null)throw new Error("ipBuff is required");if(!Ut(r))throw new Error("invalid ip address");return r}function go(e){let r=new ArrayBuffer(2);return new DataView(r).setUint16(0,e),new Uint8Array(r)}function Aa(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Lh(e){let r=oe(e),t=Uint8Array.from(Ae.default.encode(r.length));return _e([t,r],t.length+r.length)}function Fh(e){let r=Ae.default.decode(e);if(e=e.slice(Ae.default.decode.bytes),e.length!==r)throw new Error("inconsistent lengths");return D(e)}function $h(e){let r;e[0]==="Q"||e[0]==="1"?r=Ke(M.decode(`z${e}`)).bytes:r=m.parse(e).multihash.bytes;let t=Uint8Array.from(Ae.default.encode(r.length));return _e([t,r],t.length+r.length)}function jh(e){let r=Rh.decode(e),t=Uint8Array.from(Ae.default.encode(r.length));return _e([t,r],t.length+r.length)}function zh(e){let r=Ae.default.decode(e),t=e.slice(Ae.default.decode.bytes);if(t.length!==r)throw new Error("inconsistent lengths");return"u"+D(t,"base64url")}function Mh(e){let r=Ae.default.decode(e),t=e.slice(Ae.default.decode.bytes);if(t.length!==r)throw new Error("inconsistent lengths");return D(t,"base58btc")}function qh(e){let r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==16)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion address.`);let t=ge.decode("b"+r[0]),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=go(n);return _e([t,o],t.length+o.length)}function Hh(e){let r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==56)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion3 address.`);let t=ge.decode(`b${r[0]}`),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=go(n);return _e([t,o],t.length+o.length)}function Ea(e){let r=e.slice(0,e.length-2),t=e.slice(e.length-2),n=D(r,"base32"),o=Aa(t);return`${n}:${o}`}var br=U(Nt(),1);function Vh(e){let r=[],t=e.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let o=t[n],s=O(o);if(s.size===0){r.push([o]);continue}if(n++,n>=t.length)throw va("invalid address: "+e);if(s.path===!0){r.push([o,Eo(t.slice(n).join("/"))]);break}r.push([o,t[n]])}return r}function Gh(e){let r=[];return e.map(t=>{let n=Ot(t);return r.push(n.name),t.length>1&&t[1]!=null&&r.push(t[1]),null}),Eo(r.join("/"))}function Wh(e){return e.map(r=>{Array.isArray(r)||(r=[r]);let t=Ot(r);return r.length>1?[t.code,Ta(t.code,r[1])]:[t.code]})}function wo(e){return e.map(r=>{let t=Ot(r);return r[1]!=null?[t.code,Pa(t.code,r[1])]:[t.code]})}function bo(e){return Rt(_e(e.map(r=>{let t=Ot(r),n=Uint8Array.from(br.default.encode(t.code));return r.length>1&&r[1]!=null&&(n=_e([n,r[1]])),n})))}function xo(e,r){return e.size>0?e.size/8:e.size===0?0:br.default.decode(r)+(br.default.decode.bytes??0)}function Dt(e){let r=[],t=0;for(;t<e.length;){let n=br.default.decode(e,t),o=br.default.decode.bytes??0,s=O(n),i=xo(s,e.slice(t+o));if(i===0){r.push([n]),t+=o;continue}let a=e.slice(t+o,t+o+i);if(t+=i+o,t>e.length)throw va("Invalid address Uint8Array: "+D(e,"base16"));r.push([n,a])}return r}function So(e){let r=Dt(e),t=wo(r);return Gh(t)}function Jh(e){e=Eo(e);let r=Vh(e),t=Wh(r);return bo(t)}function Ca(e){return Jh(e)}function Rt(e){let r=Kh(e);if(r!=null)throw r;return Uint8Array.from(e)}function Kh(e){try{Dt(e)}catch(r){return r}}function Eo(e){return"/"+e.trim().split("/").filter(r=>r).join("/")}function va(e){return new Error("Error parsing address: "+e)}function Ot(e){return O(e[0])}var To=U(Nt(),1);var _a=U(X(),1);function Gr(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}var xr=function(e,r,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?e!==r||!n:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(e):n?n.value:r.get(e)},Po=function(e,r,t,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?e!==r||!o:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,t):o?o.value=t:r.set(e,t),t},Wr,Jr,Kr,Ua,Zh=Symbol.for("nodejs.util.inspect.custom"),Ia=[O("dns").code,O("dns4").code,O("dns6").code,O("dnsaddr").code],Yh=[O("p2p").code,O("ipfs").code],ey=new Map,Na=Symbol.for("@multiformats/js-multiaddr/multiaddr");function Lt(e){return Boolean(e?.[Na])}var Ne=class{constructor(r){if(Wr.set(this,void 0),Jr.set(this,void 0),Kr.set(this,void 0),this[Ua]=!0,r==null&&(r=""),r instanceof Uint8Array)this.bytes=Rt(r);else if(typeof r=="string"){if(r.length>0&&r.charAt(0)!=="/")throw new Error(`multiaddr "${r}" must start with a "/"`);this.bytes=Ca(r)}else if(Lt(r))this.bytes=Rt(r.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return xr(this,Wr,"f")==null&&Po(this,Wr,So(this.bytes),"f"),xr(this,Wr,"f")}toJSON(){return this.toString()}toOptions(){let r=this.protoCodes(),t=this.toString().split("/").slice(1),n,o;if(t.length>2)Ia.includes(r[0])&&Yh.includes(r[1])?(n=O("tcp").name,o=443):(n=O(t[2]).name,o=parseInt(t[3]));else if(Ia.includes(r[0]))n=O("tcp").name,o=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:r[0]===41||r[0]===55?6:4,host:t[1],transport:n,port:o}}protos(){return this.protoCodes().map(r=>Object.assign({},O(r)))}protoCodes(){let r=[],t=this.bytes,n=0;for(;n<t.length;){let o=To.default.decode(t,n),s=To.default.decode.bytes??0,i=O(o),a=xo(i,t.slice(n+s));n+=a+s,r.push(o)}return r}protoNames(){return this.protos().map(r=>r.name)}tuples(){return xr(this,Jr,"f")==null&&Po(this,Jr,Dt(this.bytes),"f"),xr(this,Jr,"f")}stringTuples(){return xr(this,Kr,"f")==null&&Po(this,Kr,wo(this.tuples()),"f"),xr(this,Kr,"f")}encapsulate(r){return r=new Ne(r),new Ne(this.toString()+r.toString())}decapsulate(r){let t=r.toString(),n=this.toString(),o=n.lastIndexOf(t);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${r.toString()}`);return new Ne(n.slice(0,o))}decapsulateCode(r){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===r)return new Ne(bo(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Vr.ipfs.code).pop();if(t?.[1]!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?D(M.decode(`z${n}`),"base58btc"):D(m.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let r=null;try{r=this.stringTuples().filter(t=>O(t[0]).path===!0)[0][1],r==null&&(r=null)}catch{r=null}return r}equals(r){return Gr(this.bytes,r.bytes)}async resolve(r){let t=this.protos().find(s=>s.resolvable);if(t==null)return[this];let n=ey.get(t.name);if(n==null)throw(0,_a.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,r)).map(s=>new Ne(s))}nodeAddress(){let r=this.toOptions();if(r.transport!=="tcp"&&r.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${r.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:r.family,address:r.host,port:r.port}}isThinWaistAddress(r){let t=(r??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(Wr=new WeakMap,Jr=new WeakMap,Kr=new WeakMap,Ua=Na,Zh)](){return`Multiaddr(${So(this.bytes)})`}};function B(e){return new Ne(e)}var ve=U(Ao(),1);var fy=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;P.nanosecond=P.ns=1/1e6;P.\u00B5s=P.\u03BCs=P.us=P.microsecond=1/1e3;P.millisecond=P.ms=P[""]=1;P.second=P.sec=P.s=P.ms*1e3;P.minute=P.min=P.m=P.s*60;P.hour=P.hr=P.h=P.m*60;P.day=P.d=P.h*24;P.week=P.wk=P.w=P.d*7;P.month=P.b=P.d*(365.25/12);P.year=P.yr=P.y=P.d*365.25;function P(e="",r="ms"){var t=null;return e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2"),e.replace(fy,function(n,o,s){s=La(s),s&&(t=(t||0)+parseFloat(o,10)*s)}),t&&t/(La(r)||1)}function La(e){return P[e]||P[e.toLowerCase().replace(/s$/,"")]}var Fa=P;var Ce=U(qa(),1);Ce.default.formatters.b=e=>e==null?"undefined":M.baseEncode(e);Ce.default.formatters.t=e=>e==null?"undefined":ge.baseEncode(e);Ce.default.formatters.m=e=>e==null?"undefined":hr.baseEncode(e);Ce.default.formatters.p=e=>e==null?"undefined":e.toString();Ce.default.formatters.c=e=>e==null?"undefined":e.toString();Ce.default.formatters.k=e=>e==null?"undefined":e.toString();function zt(e){return Object.assign((0,Ce.default)(e),{error:(0,Ce.default)(`${e}:error`),trace:(0,Ce.default)(`${e}:trace`)})}var er=U(Vt(),1);var Sc=U(Do(),1),Ec=Sc.default;var Gt=(e,r)=>r,ag=(e,r,t,n)=>{if(n!=null&&n.assumeHttp===!1)return`tcp://${e}:${r}`;let o="tcp",s=`:${r}`;return t[t.length-1].protocol==="tcp"&&(o=r==="443"?"https":"http",s=r==="443"||r==="80"?"":s),`${o}://${e}${s}`},cg={ip4:Gt,ip6:(e,r,t,n)=>n.length===1&&n[0].protocol==="ip6"?r:`[${r}]`,tcp:(e,r,t,n,o)=>n.some(s=>["http","https","ws","wss"].includes(s.protocol))?`${e}:${r}`:ag(e,r,n,o),udp:(e,r)=>`udp://${e}:${r}`,dnsaddr:Gt,dns4:Gt,dns6:Gt,ipfs:(e,r)=>`${e}/ipfs/${r}`,p2p:(e,r)=>`${e}/p2p/${r}`,http:e=>`http://${e}`,https:e=>`https://${e}`,ws:e=>`ws://${e}`,wss:e=>`wss://${e}`,"p2p-websocket-star":e=>`${e}/p2p-websocket-star`,"p2p-webrtc-star":e=>`${e}/p2p-webrtc-star`,"p2p-webrtc-direct":e=>`${e}/p2p-webrtc-direct`};function Pc(e,r){let t=B(e),n=t.toString().split("/").slice(1);return t.tuples().map(o=>({protocol:n.shift()??"",content:o[1]!=null?n.shift()??"":""})).reduce((o,s,i,a)=>{let c=cg[s.protocol];if(c==null)throw new Error(`Unsupported protocol ${s.protocol}`);return c(o,s.content,i,a,r)},"")}function jo(e){try{e=Pc(B(e))}catch{}return e=e.toString(),e}var Tc=()=>{};var Ac=zt("ipfs-http-client:lib:error-handler"),ug=Ec.bind({ignoreUndefined:!0}),fg=ve.isBrowser||ve.isWebWorker?location.protocol:"http",lg=ve.isBrowser||ve.isWebWorker?location.hostname:"localhost",pg=ve.isBrowser||ve.isWebWorker?location.port:"5001",dg=(e={})=>{let r,t={},n;if(typeof e=="string"||Lt(e))r=new URL(jo(e));else if(e instanceof URL)r=e;else if(typeof e.url=="string"||Lt(e.url))r=new URL(jo(e.url)),t=e;else if(e.url instanceof URL)r=e.url,t=e;else{t=e||{};let o=(t.protocol||fg).replace(":",""),s=(t.host||lg).split(":")[0],i=t.port||pg;r=new URL(`${o}://${s}:${i}`)}if(t.apiPath?r.pathname=t.apiPath:(r.pathname==="/"||r.pathname===void 0)&&(r.pathname="api/v0"),ve.isNode){let o=Tc(r);n=t.agent||new o({keepAlive:!0,maxSockets:6})}return{...t,host:r.host,protocol:r.protocol.replace(":",""),port:Number(r.port),apiPath:r.pathname,url:r,agent:n}},mg=async e=>{let r;try{if((e.headers.get("Content-Type")||"").startsWith("application/json")){let n=await e.json();Ac(n),r=n.Message||n.message}else r=await e.text()}catch(n){Ac("Failed to parse error response",n),r=n.message}let t=new er.default.HTTPError(e);throw r&&(r.includes("deadline has elapsed")&&(t=new er.default.TimeoutError),r&&r.includes("context deadline exceeded")&&(t=new er.default.TimeoutError)),r&&r.includes("request timed out")&&(t=new er.default.TimeoutError),r&&(t.message=r),t},hg=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Cc=e=>e.replace(hg,function(r){return"-"+r.toLowerCase()}),yg=e=>typeof e=="string"?Fa(e):e,Ve=class extends er.default{constructor(r={}){let t=dg(r);super({timeout:yg(t.timeout||0)||void 0,headers:t.headers,base:`${t.url}`,handleError:mg,transformSearchParams:o=>{let s=new URLSearchParams;for(let[i,a]of o)a!=="undefined"&&a!=="null"&&i!=="signal"&&s.append(Cc(i),a),i==="timeout"&&!isNaN(a)&&s.append(Cc(i),a);return s},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;let n=this.fetch;this.fetch=(o,s={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${t.url}/${o}`),n.call(this,o,ug(s,{method:"POST"})))}},G1=er.default.HTTPError;var u=e=>r=>e(new Ve(r),r);function Wt(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}var vc=U(X(),1);function Jt(e){if(e==null)return;let r;if(e.secs!=null&&(r={secs:e.secs,nsecs:e.nsecs}),e.Seconds!=null&&(r={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(r={secs:e[0],nsecs:e[1]}),e instanceof Date){let t=e.getTime(),n=Math.floor(t/1e3);r={secs:n,nsecs:(t-n*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(r,"secs")){if(r!=null&&r.nsecs!=null&&(r.nsecs<0||r.nsecs>999999999))throw(0,vc.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return r}}function f({arg:e,searchParams:r,hashAlg:t,mtime:n,mode:o,...s}={}){r&&(s={...s,...r}),t&&(s.hash=t),n!=null&&(n=Jt(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),o!=null&&(s.mode=Wt(o)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);let i=new URLSearchParams(s);return e.forEach(a=>i.append("arg",a)),i}var kc=u(e=>{async function r(t={}){return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:f(t),headers:t.headers})).json()).Keys||[]).map(o=>m.parse(o["/"]))}return r});var Bc=u(e=>{async function r(t,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:f({...n,peer:t.toString()}),headers:n.headers})).json()).Keys||[]).map(s=>m.parse(s["/"]))}return r});var gg=U(X(),1);var Uc=Symbol.for("@libp2p/peer-id");var wg=Symbol.for("nodejs.util.inspect.custom"),Ic=Object.values(Te).map(e=>e.decoder).reduce((e,r)=>e.or(r),Te.identity.decoder),_c=114,Nc=36,Dc=37,Yr=class{constructor(r){this.type=r.type,this.multihash=r.multihash,this.privateKey=r.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[Uc](){return!0}toString(){return this.string==null&&(this.string=M.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return m.createV1(_c,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(r){if(r instanceof Uint8Array)return Gr(this.multihash.bytes,r);if(typeof r=="string")return L(r).equals(this);if(r?.multihash?.bytes!=null)return Gr(this.multihash.bytes,r.multihash.bytes);throw new Error("not valid Id")}[wg](){return`PeerId(${this.toString()})`}},et=class extends Yr{constructor(r){super({...r,type:"RSA"}),this.type="RSA",this.publicKey=r.publicKey}},rt=class extends Yr{constructor(r){super({...r,type:"Ed25519"}),this.type="Ed25519",this.publicKey=r.multihash.digest}},tt=class extends Yr{constructor(r){super({...r,type:"secp256k1"}),this.type="secp256k1",this.publicKey=r.multihash.digest}};function L(e,r){if(r=r??Ic,e.charAt(0)==="1"||e.charAt(0)==="Q"){let t=Ke(M.decode(`z${e}`));return e.startsWith("12D")?new rt({multihash:t}):e.startsWith("16U")?new tt({multihash:t}):new et({multihash:t})}return bg(Ic.decode(e))}function bg(e){try{let r=Ke(e);if(r.code===Ze.code){if(r.digest.length===Nc)return new rt({multihash:r});if(r.digest.length===Dc)return new tt({multihash:r})}if(r.code===kt.code)return new et({multihash:r})}catch{return xg(m.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function xg(e){if(e==null||e.multihash==null||e.version==null||e.version===1&&e.code!==_c)throw new Error("Supplied PeerID CID is invalid");let r=e.multihash;if(r.code===kt.code)return new et({multihash:e.multihash});if(r.code===Ze.code){if(r.digest.length===Nc)return new rt({multihash:e.multihash});if(r.digest.length===Dc)return new tt({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}var Kt=u(e=>{async function r(t={}){let n=await e.post("bitswap/stat",{searchParams:f(t),signal:t.signal,headers:t.headers});return Sg(await n.json())}return r});function Sg(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map(r=>m.parse(r["/"])),peers:(e.Peers||[]).map(r=>L(r)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}var Rc=u(e=>{async function r(t,n={}){return(await e.post("bitswap/unwant",{signal:n.signal,searchParams:f({arg:t.toString(),...n}),headers:n.headers})).json()}return r});function Oc(e){return{wantlist:kc(e),wantlistForPeer:Bc(e),unwant:Rc(e),stat:Kt(e)}}var Xt=u(e=>{async function r(t,n={}){let o=await e.post("block/get",{signal:n.signal,searchParams:f({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}return r});var Fc=U(X(),1);function De(e){let[r,t]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>r.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:r.next(),[t](){return this}}}async function*Re(e,r={}){let t=e.getReader();try{for(;;){let n=await t.read();if(n.done)return;yield n.value}}finally{r.preventCancel!==!0&&await t.cancel(),t.releaseLock()}}async function nt(e){let r=[];for await(let t of e)r.push(t);return r}function pe(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Oe(e){return e.constructor&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function ot(e){return typeof e=="object"&&(e.path||e.content)}var Le=e=>e&&typeof e.getReader=="function";async function $c(e){if(pe(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(Oe(e))return e;if(Le(e)&&(e=Re(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=De(e),{value:t,done:n}=await r.peek();if(n)return Lc(r);if(r.push(t),Number.isInteger(t))return new Blob([Uint8Array.from(await nt(r))]);if(pe(t)||typeof t=="string"||t instanceof String)return Lc(r)}throw(0,Fc.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}async function Lc(e){let r=[];for await(let t of e)r.push(t);return new Blob(r)}var ct=U(X(),1);async function*Cr(e,r){for await(let t of e)yield r(t)}var Lu=U(X(),1);var Fe=U(Ou(),1),kr=Fe.default.Reader,es=Fe.default.Writer,S=Fe.default.util,W=Fe.default.roots["ipfs-unixfs"]||(Fe.default.roots["ipfs-unixfs"]={}),Ig=W.Data=(()=>{function e(r){if(this.blocksizes=[],r)for(var t=Object.keys(r),n=0;n<t.length;++n)r[t[n]]!=null&&(this[t[n]]=r[t[n]])}return e.prototype.Type=0,e.prototype.Data=S.newBuffer([]),e.prototype.filesize=S.Long?S.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=S.emptyArray,e.prototype.hashType=S.Long?S.Long.fromBits(0,0,!0):0,e.prototype.fanout=S.Long?S.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(t,n){if(n||(n=es.create()),n.uint32(8).int32(t.Type),t.Data!=null&&Object.hasOwnProperty.call(t,"Data")&&n.uint32(18).bytes(t.Data),t.filesize!=null&&Object.hasOwnProperty.call(t,"filesize")&&n.uint32(24).uint64(t.filesize),t.blocksizes!=null&&t.blocksizes.length)for(var o=0;o<t.blocksizes.length;++o)n.uint32(32).uint64(t.blocksizes[o]);return t.hashType!=null&&Object.hasOwnProperty.call(t,"hashType")&&n.uint32(40).uint64(t.hashType),t.fanout!=null&&Object.hasOwnProperty.call(t,"fanout")&&n.uint32(48).uint64(t.fanout),t.mode!=null&&Object.hasOwnProperty.call(t,"mode")&&n.uint32(56).uint32(t.mode),t.mtime!=null&&Object.hasOwnProperty.call(t,"mtime")&&W.UnixTime.encode(t.mtime,n.uint32(66).fork()).ldelim(),n},e.decode=function(t,n){t instanceof kr||(t=kr.create(t));for(var o=n===void 0?t.len:t.pos+n,s=new W.Data;t.pos<o;){var i=t.uint32();switch(i>>>3){case 1:s.Type=t.int32();break;case 2:s.Data=t.bytes();break;case 3:s.filesize=t.uint64();break;case 4:if(s.blocksizes&&s.blocksizes.length||(s.blocksizes=[]),(i&7)===2)for(var a=t.uint32()+t.pos;t.pos<a;)s.blocksizes.push(t.uint64());else s.blocksizes.push(t.uint64());break;case 5:s.hashType=t.uint64();break;case 6:s.fanout=t.uint64();break;case 7:s.mode=t.uint32();break;case 8:s.mtime=W.UnixTime.decode(t,t.uint32());break;default:t.skipType(i&7);break}}if(!s.hasOwnProperty("Type"))throw S.ProtocolError("missing required 'Type'",{instance:s});return s},e.fromObject=function(t){if(t instanceof W.Data)return t;var n=new W.Data;switch(t.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(t.Data!=null&&(typeof t.Data=="string"?S.base64.decode(t.Data,n.Data=S.newBuffer(S.base64.length(t.Data)),0):t.Data.length&&(n.Data=t.Data)),t.filesize!=null&&(S.Long?(n.filesize=S.Long.fromValue(t.filesize)).unsigned=!0:typeof t.filesize=="string"?n.filesize=parseInt(t.filesize,10):typeof t.filesize=="number"?n.filesize=t.filesize:typeof t.filesize=="object"&&(n.filesize=new S.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var o=0;o<t.blocksizes.length;++o)S.Long?(n.blocksizes[o]=S.Long.fromValue(t.blocksizes[o])).unsigned=!0:typeof t.blocksizes[o]=="string"?n.blocksizes[o]=parseInt(t.blocksizes[o],10):typeof t.blocksizes[o]=="number"?n.blocksizes[o]=t.blocksizes[o]:typeof t.blocksizes[o]=="object"&&(n.blocksizes[o]=new S.LongBits(t.blocksizes[o].low>>>0,t.blocksizes[o].high>>>0).toNumber(!0))}if(t.hashType!=null&&(S.Long?(n.hashType=S.Long.fromValue(t.hashType)).unsigned=!0:typeof t.hashType=="string"?n.hashType=parseInt(t.hashType,10):typeof t.hashType=="number"?n.hashType=t.hashType:typeof t.hashType=="object"&&(n.hashType=new S.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),t.fanout!=null&&(S.Long?(n.fanout=S.Long.fromValue(t.fanout)).unsigned=!0:typeof t.fanout=="string"?n.fanout=parseInt(t.fanout,10):typeof t.fanout=="number"?n.fanout=t.fanout:typeof t.fanout=="object"&&(n.fanout=new S.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),t.mode!=null&&(n.mode=t.mode>>>0),t.mtime!=null){if(typeof t.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=W.UnixTime.fromObject(t.mtime)}return n},e.toObject=function(t,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.blocksizes=[]),n.defaults){if(o.Type=n.enums===String?"Raw":0,n.bytes===String?o.Data="":(o.Data=[],n.bytes!==Array&&(o.Data=S.newBuffer(o.Data))),S.Long){var s=new S.Long(0,0,!0);o.filesize=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.filesize=n.longs===String?"0":0;if(S.Long){var s=new S.Long(0,0,!0);o.hashType=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.hashType=n.longs===String?"0":0;if(S.Long){var s=new S.Long(0,0,!0);o.fanout=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.fanout=n.longs===String?"0":0;o.mode=0,o.mtime=null}if(t.Type!=null&&t.hasOwnProperty("Type")&&(o.Type=n.enums===String?W.Data.DataType[t.Type]:t.Type),t.Data!=null&&t.hasOwnProperty("Data")&&(o.Data=n.bytes===String?S.base64.encode(t.Data,0,t.Data.length):n.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),t.filesize!=null&&t.hasOwnProperty("filesize")&&(typeof t.filesize=="number"?o.filesize=n.longs===String?String(t.filesize):t.filesize:o.filesize=n.longs===String?S.Long.prototype.toString.call(t.filesize):n.longs===Number?new S.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){o.blocksizes=[];for(var i=0;i<t.blocksizes.length;++i)typeof t.blocksizes[i]=="number"?o.blocksizes[i]=n.longs===String?String(t.blocksizes[i]):t.blocksizes[i]:o.blocksizes[i]=n.longs===String?S.Long.prototype.toString.call(t.blocksizes[i]):n.longs===Number?new S.LongBits(t.blocksizes[i].low>>>0,t.blocksizes[i].high>>>0).toNumber(!0):t.blocksizes[i]}return t.hashType!=null&&t.hasOwnProperty("hashType")&&(typeof t.hashType=="number"?o.hashType=n.longs===String?String(t.hashType):t.hashType:o.hashType=n.longs===String?S.Long.prototype.toString.call(t.hashType):n.longs===Number?new S.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),t.fanout!=null&&t.hasOwnProperty("fanout")&&(typeof t.fanout=="number"?o.fanout=n.longs===String?String(t.fanout):t.fanout:o.fanout=n.longs===String?S.Long.prototype.toString.call(t.fanout):n.longs===Number?new S.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),t.mode!=null&&t.hasOwnProperty("mode")&&(o.mode=t.mode),t.mtime!=null&&t.hasOwnProperty("mtime")&&(o.mtime=W.UnixTime.toObject(t.mtime,n)),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Fe.default.util.toJSONOptions)},e.DataType=function(){let r={},t=Object.create(r);return t[r[0]="Raw"]=0,t[r[1]="Directory"]=1,t[r[2]="File"]=2,t[r[3]="Metadata"]=3,t[r[4]="Symlink"]=4,t[r[5]="HAMTShard"]=5,t}(),e})(),a2=W.UnixTime=(()=>{function e(r){if(r)for(var t=Object.keys(r),n=0;n<t.length;++n)r[t[n]]!=null&&(this[t[n]]=r[t[n]])}return e.prototype.Seconds=S.Long?S.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(t,n){return n||(n=es.create()),n.uint32(8).int64(t.Seconds),t.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&n.uint32(21).fixed32(t.FractionalNanoseconds),n},e.decode=function(t,n){t instanceof kr||(t=kr.create(t));for(var o=n===void 0?t.len:t.pos+n,s=new W.UnixTime;t.pos<o;){var i=t.uint32();switch(i>>>3){case 1:s.Seconds=t.int64();break;case 2:s.FractionalNanoseconds=t.fixed32();break;default:t.skipType(i&7);break}}if(!s.hasOwnProperty("Seconds"))throw S.ProtocolError("missing required 'Seconds'",{instance:s});return s},e.fromObject=function(t){if(t instanceof W.UnixTime)return t;var n=new W.UnixTime;return t.Seconds!=null&&(S.Long?(n.Seconds=S.Long.fromValue(t.Seconds)).unsigned=!1:typeof t.Seconds=="string"?n.Seconds=parseInt(t.Seconds,10):typeof t.Seconds=="number"?n.Seconds=t.Seconds:typeof t.Seconds=="object"&&(n.Seconds=new S.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),t.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=t.FractionalNanoseconds>>>0),n},e.toObject=function(t,n){n||(n={});var o={};if(n.defaults){if(S.Long){var s=new S.Long(0,0,!1);o.Seconds=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.Seconds=n.longs===String?"0":0;o.FractionalNanoseconds=0}return t.Seconds!=null&&t.hasOwnProperty("Seconds")&&(typeof t.Seconds=="number"?o.Seconds=n.longs===String?String(t.Seconds):t.Seconds:o.Seconds=n.longs===String?S.Long.prototype.toString.call(t.Seconds):n.longs===Number?new S.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),t.FractionalNanoseconds!=null&&t.hasOwnProperty("FractionalNanoseconds")&&(o.FractionalNanoseconds=t.FractionalNanoseconds),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Fe.default.util.toJSONOptions)},e})(),c2=W.Metadata=(()=>{function e(r){if(r)for(var t=Object.keys(r),n=0;n<t.length;++n)r[t[n]]!=null&&(this[t[n]]=r[t[n]])}return e.prototype.MimeType="",e.encode=function(t,n){return n||(n=es.create()),t.MimeType!=null&&Object.hasOwnProperty.call(t,"MimeType")&&n.uint32(10).string(t.MimeType),n},e.decode=function(t,n){t instanceof kr||(t=kr.create(t));for(var o=n===void 0?t.len:t.pos+n,s=new W.Metadata;t.pos<o;){var i=t.uint32();switch(i>>>3){case 1:s.MimeType=t.string();break;default:t.skipType(i&7);break}}return s},e.fromObject=function(t){if(t instanceof W.Metadata)return t;var n=new W.Metadata;return t.MimeType!=null&&(n.MimeType=String(t.MimeType)),n},e.toObject=function(t,n){n||(n={});var o={};return n.defaults&&(o.MimeType=""),t.MimeType!=null&&t.hasOwnProperty("MimeType")&&(o.MimeType=t.MimeType),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Fe.default.util.toJSONOptions)},e})();var u2=parseInt("0644",8),f2=parseInt("0755",8);function rn(e){if(e!=null)return typeof e=="number"?e&4095:(e=e.toString(),e.substring(0,1)==="0"?parseInt(e,8)&4095:parseInt(e,10)&4095)}function tn(e){if(e==null)return;let r;if(e.secs!=null&&(r={secs:e.secs,nsecs:e.nsecs}),e.Seconds!=null&&(r={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(r={secs:e[0],nsecs:e[1]}),e instanceof Date){let t=e.getTime(),n=Math.floor(t/1e3);r={secs:n,nsecs:(t-n*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(r,"secs")){if(r!=null&&r.nsecs!=null&&(r.nsecs<0||r.nsecs>999999999))throw(0,Lu.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return r}}async function*Fu(e,r){if(typeof e=="string"||e instanceof String||pe(e)||Oe(e)||e._readableState)throw(0,ct.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Le(e)&&(e=Re(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let t=De(e),{value:n,done:o}=await t.peek();if(o){yield*[];return}if(t.push(n),Number.isInteger(n))throw(0,ct.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState){yield*Cr(t,s=>rs({content:s},r));return}if(pe(n)){yield rs({content:t},r);return}if(ot(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||Le(n)||Oe(n)){yield*Cr(t,s=>rs(s,r));return}}throw ot(e)?(0,ct.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,ct.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function rs(e,r){let{path:t,mode:n,mtime:o,content:s}=e,i={path:t||"",mode:rn(n),mtime:tn(o)};return s?i.content=await r(s):t||(i.content=await r(e)),i}function $u(e){return Fu(e,$c,!0)}function ju(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function F(e,r,t={}){let n=[],o=new FormData,s=0,i=0;for await(let{content:a,path:c,mode:p,mtime:d}of $u(e)){let y="",x=a?"file":"dir";s>0&&(y=`-${s}`);let _=x+y,A=[];if(p!=null&&A.push(`mode=${ju(p)}`),d!=null){let{secs:k,nsecs:I}=d;A.push(`mtime=${k}`),I!=null&&A.push(`mtime-nsecs=${I}`)}if(A.length&&(_=`${_}?${A.join("&")}`),a){o.set(_,a,c!=null?encodeURIComponent(c):void 0);let k=i+a.size;n.push({name:c,start:i,end:k}),i=k}else if(c!=null)o.set(_,new File([""],encodeURIComponent(c),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");s++}return{total:i,parts:n,headers:t,body:o}}var zu=U(Fo(),1);function Ng(e){return e.filter(Boolean)}function $(...e){return(0,zu.anySignal)(Ng(e))}var Mu=u(e=>{async function r(t,n={}){let o=new AbortController,s=$(o.signal,n.signal),i;try{i=await(await e.post("block/put",{signal:s,searchParams:f(n),...await F([t],o,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return r(t,{...n,format:"protobuf"});if(n.format==="dag-cbor")return r(t,{...n,format:"cbor"});throw a}return m.parse(i.Key)}return r});var qu=u(e=>{async function*r(t,n={}){Array.isArray(t)||(t=[t]);let o=await e.post("block/rm",{signal:n.signal,searchParams:f({arg:t.map(s=>s.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield Dg(s)}return r});function Dg(e){let r={cid:m.parse(e.Hash)};return e.Error&&(r.error=new Error(e.Error)),r}var Hu=u(e=>{async function r(t,n={}){let s=await(await e.post("block/stat",{signal:n.signal,searchParams:f({arg:t.toString(),...n}),headers:n.headers})).json();return{cid:m.parse(s.Key),size:s.Size}}return r});function Vu(e){return{get:Xt(e),put:Mu(e),rm:qu(e),stat:Hu(e)}}var Gu=u(e=>{async function r(t,n={}){let o=await e.post("bootstrap/add",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>B(i))}}return r});var Wu=u(e=>{async function r(t={}){let n=await e.post("bootstrap/rm",{signal:t.signal,searchParams:f({...t,all:!0}),headers:t.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>B(s))}}return r});var Ju=u(e=>{async function r(t={}){let n=await e.post("bootstrap/list",{signal:t.signal,searchParams:f(t),headers:t.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>B(s))}}return r});var Ku=u(e=>{async function r(t={}){let n=await e.post("bootstrap/add",{signal:t.signal,searchParams:f({...t,default:!0}),headers:t.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>B(s))}}return r});var Xu=u(e=>{async function r(t,n={}){let o=await e.post("bootstrap/rm",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>B(i))}}return r});function Qu(e){return{add:Gu(e),clear:Wu(e),list:Ju(e),reset:Ku(e),rm:Xu(e)}}var Zu=u(e=>{async function r(t,n={}){let s=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}return r});function T(e){if(e==null)return e;let r=/^[A-Z]+$/,t={};return Object.keys(e).reduce((n,o)=>(r.test(o)?n[o.toLowerCase()]=e[o]:r.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=e[o]:n[o]=e[o],n),t)}var Yu=u(e=>{async function r(t={}){return(await(await e.post("config/profile/list",{signal:t.signal,searchParams:f(t),headers:t.headers})).json()).map(s=>T(s))}return r});function ef(e){return{apply:Zu(e),list:Yu(e)}}var rf=u(e=>async(t,n={})=>{if(!t)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers})).json()).Value});var tf=u(e=>async(t={})=>await(await e.post("config/show",{signal:t.signal,searchParams:f({...t}),headers:t.headers})).json());var nf=u(e=>async(t,n={})=>{let o=new AbortController,s=$(o.signal,n.signal);await(await e.post("config/replace",{signal:s,searchParams:f(n),...await F([oe(JSON.stringify(t))],o,n.headers)})).text()});var of=u(e=>async(t,n,o={})=>{if(typeof t!="string")throw new Error("Invalid key type");let s={...o,...Rg(t,n)};await(await e.post("config",{signal:o.signal,searchParams:f(s),headers:o.headers})).text()}),Rg=(e,r)=>{switch(typeof r){case"boolean":return{arg:[e,r.toString()],bool:!0};case"string":return{arg:[e,r]};default:return{arg:[e,JSON.stringify(r)],json:!0}}};function sf(e){return{getAll:tf(e),get:rf(e),set:of(e),replace:nf(e),profiles:ef(e)}}var af=u(e=>{async function*r(t,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:f({arg:t.toString()}),headers:n.headers})).iterator()}return r});var ts=U(X(),1);async function*ns(e,r,t,n,o){let s=async p=>{let d=await t.getCodec(p.code),y=await n(p,o);return d.decode(y)},i=r.split("/").filter(Boolean),a=await s(e),c=e;for(;i.length;){let p=i.shift();if(!p)throw(0,ts.default)(new Error(`Could not resolve path "${r}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,p))a=a[p],yield{value:a,remainderPath:i.join("/")};else throw(0,ts.default)(new Error(`no link named "${p}" under ${c}`),"ERR_NO_LINK");let d=m.asCID(a);d&&(c=d,a=await s(a))}yield{value:a,remainderPath:""}}async function os(e){for await(let r of e)return r}async function $e(e){let r;for await(let t of e)r=t;return r}var cf=U(X(),1);var uf=(e,r)=>u((n,o)=>{let s=Xt(o);return async(a,c={})=>{if(c.path){let _=c.localResolve?await os(ns(a,c.path,e,s,c)):await $e(ns(a,c.path,e,s,c));if(!_)throw(0,cf.default)(new Error("Not found"),"ERR_NOT_FOUND");return _}let p=await e.getCodec(a.code),d=await s(a,c);return{value:p.decode(d),remainderPath:""}}})(r);var ff=u(e=>{async function*r(t,n={}){let o=new AbortController,s=$(o.signal,n.signal),{headers:i,body:a}=await F(t,o,n.headers),c=await e.post("dag/import",{signal:s,headers:i,body:a,searchParams:f({"pin-roots":n.pinRoots})});for await(let{Root:p}of c.ndjson())if(p!==void 0){let{Cid:{"/":d},PinErrorMsg:y}=p;yield{root:{cid:m.parse(d),pinErrorMsg:y}}}}return r});var nn=(e,r)=>u(n=>async(s,i={})=>{let a={storeCodec:"dag-cbor",hashAlg:"sha2-256",...i},c;if(a.inputCodec){if(!(s instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");c=s}else c=(await e.getCodec(a.storeCodec)).encode(s),a.inputCodec=a.storeCodec;let p=new AbortController,d=$(p.signal,a.signal),x=await(await n.post("dag/put",{timeout:a.timeout,signal:d,searchParams:f(a),...await F([c],p,a.headers)})).json();return m.parse(x.Cid["/"])})(r);var lf=u(e=>async(t,n={})=>{let s=await(await e.post("dag/resolve",{signal:n.signal,searchParams:f({arg:`${t}${n.path?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:m.parse(s.Cid["/"]),remainderPath:s.RemPath}});function pf(e,r){return{export:af(r),get:uf(e,r),import:ff(r),put:nn(e,r),resolve:lf(r)}}var me=e=>{if(e.Type===0)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===1)return{from:L(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map(({ID:r,Addrs:t})=>({id:L(r),multiaddrs:t.map(n=>B(n)),protocols:[]})),providers:(e.Responses||[]).map(({ID:r,Addrs:t})=>({id:L(r),multiaddrs:t.map(n=>B(n)),protocols:[]}))};if(e.Type===2){let r={id:e.ID??L(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(r={id:L(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(t=>B(t)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:r}}if(e.Type===3)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===4)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:r,Addrs:t})=>({id:L(r),multiaddrs:t.map(n=>B(n)),protocols:[]}))};if(e.Type===5)return{name:"VALUE",type:e.Type,value:oe(e.Extra,"base64pad")};if(e.Type===6){let r=e.Responses.map(({ID:t})=>L(t));if(!r.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:r[0]}}if(e.Type===7)return{name:"DIALING_PEER",type:e.Type,peer:L(e.ID)};throw new Error("Unknown DHT event type")};var df=u(e=>{async function*r(t,n={}){let o=await e.post("dht/findpeer",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers});for await(let s of o.ndjson())yield me(s)}return r});var mf=u(e=>{async function*r(t,n={}){let o=await e.post("dht/findprovs",{signal:n.signal,searchParams:f({arg:t.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield me(s)}return r});var hf=u(e=>{async function*r(t,n={}){let o=await e.post("dht/get",{signal:n.signal,searchParams:f({arg:t instanceof Uint8Array?D(t):t.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield me(s)}return r});var yf=u(e=>{async function*r(t,n={recursive:!1}){let o=Array.isArray(t)?t:[t],s=await e.post("dht/provide",{signal:n.signal,searchParams:f({arg:o.map(i=>i.toString()),...n}),headers:n.headers});for await(let i of s.ndjson())yield me(i)}return r});var gf=u(e=>{async function*r(t,n,o={}){let s=new AbortController,i=$(s.signal,o.signal),a=await e.post("dht/put",{signal:i,searchParams:f({arg:t instanceof Uint8Array?D(t):t.toString(),...o}),...await F([n],s,o.headers)});for await(let c of a.ndjson())yield me(c)}return r});var wf=u(e=>{async function*r(t,n={}){let o=await e.post("dht/query",{signal:n.signal,searchParams:f({arg:t.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield me(s)}return r});function bf(e){return{findPeer:df(e),findProvs:mf(e),get:hf(e),provide:yf(e),put:gf(e),query:wf(e)}}var xf=u(e=>{async function r(t={}){return(await e.post("diag/cmds",{signal:t.signal,searchParams:f(t),headers:t.headers})).json()}return r});var Sf=u(e=>{async function r(t={}){return(await e.post("diag/net",{signal:t.signal,searchParams:f(t),headers:t.headers})).json()}return r});var Ef=u(e=>{async function r(t={}){return(await e.post("diag/sys",{signal:t.signal,searchParams:f(t),headers:t.headers})).json()}return r});function Pf(e){return{cmds:xf(e),net:Sf(e),sys:Ef(e)}}var Tf=u(e=>{async function r(t,n,o={}){await(await e.post("files/chmod",{signal:o.signal,searchParams:f({arg:t,mode:n,...o}),headers:o.headers})).text()}return r});var Af=u(e=>{async function r(t,n,o={}){let s=Array.isArray(t)?t:[t];await(await e.post("files/cp",{signal:o.signal,searchParams:f({arg:s.concat(n).map(a=>m.asCID(a)?`/ipfs/${a}`:a),...o}),headers:o.headers})).text()}return r});var Cf=u(e=>{async function r(t,n={}){if(!t||typeof t!="string")throw new Error("ipfs.files.flush requires a path");let s=await(await e.post("files/flush",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers})).json();return m.parse(s.Cid)}return r});function ut(e){let r=T(e);return Object.prototype.hasOwnProperty.call(r,"mode")&&(r.mode=parseInt(r.mode,8)),Object.prototype.hasOwnProperty.call(r,"mtime")&&(r.mtime={secs:r.mtime,nsecs:r.mtimeNsecs||0},delete r.mtimeNsecs),r}var kf=u(e=>{async function*r(t,n={}){if(!t)throw new Error("ipfs.files.ls requires a path");let o=await e.post("files/ls",{signal:n.signal,searchParams:f({arg:m.asCID(t)?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(let s of o.ndjson())if("Entries"in s)for(let i of s.Entries||[])yield vf(ut(i));else yield vf(ut(s))}return r});function vf(e){return e.hash&&(e.cid=m.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}var Bf=u(e=>{async function r(t,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers})).text()}return r});var Uf=u(e=>{async function r(t,n,o={}){Array.isArray(t)||(t=[t]),await(await e.post("files/mv",{signal:o.signal,searchParams:f({arg:t.concat(n),...o}),headers:o.headers})).text()}return r});var Nf=U(_f(),1),Df=u(e=>{async function*r(t,n={}){let o=await e.post("files/read",{signal:n.signal,searchParams:f({arg:t,count:n.length,...n}),headers:n.headers});yield*(0,Nf.default)(o.body)}return r});var Rf=U(Vt(),1),Of=u(e=>{async function r(t,n={}){let o=await e.post("files/rm",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers}),s=await o.text();if(s!==""){let i=new Rf.default.HTTPError(o);throw i.message=s,i}}return r});var on=u(e=>{async function r(t,n={}){let s=await(await e.post("files/stat",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers})).json();return s.WithLocality=s.WithLocality||!1,Hg(ut(s))}return r});function Hg(e){return e.cid=m.parse(e.hash),delete e.hash,e}var Lf=u(e=>{async function r(t,n={}){await(await e.post("files/touch",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers})).text()}return r});var Ff=u(e=>{async function r(t,n,o={}){let s=new AbortController,i=$(s.signal,o.signal);await(await e.post("files/write",{signal:i,searchParams:f({arg:t,streamChannels:!0,count:o.length,...o}),...await F([{content:n,path:"arg",mode:Wt(o.mode),mtime:Jt(o.mtime)}],s,o.headers)})).text()}return r});function $f(e){return{chmod:Tf(e),cp:Af(e),flush:Cf(e),ls:kf(e),mkdir:Bf(e),mv:Uf(e),read:Df(e),rm:Of(e),stat:on(e),touch:Lf(e),write:Ff(e)}}var jf=U(X(),1),zf=u(e=>async(t,n,o={})=>{throw(0,jf.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var Mf=u(e=>{async function r(t,n){let o=n??{type:"Ed25519"},i=await(await e.post("key/gen",{signal:o.signal,searchParams:f({arg:t,...o}),headers:o.headers})).json();return T(i)}return r});var qf=u(e=>{async function r(t,n,o,s={}){let a=await(await e.post("key/import",{signal:s.signal,searchParams:f({arg:t,pem:n,password:o,...s}),headers:s.headers})).json();return T(a)}return r});var Hf=U(X(),1),Vf=u(e=>async(t,n={})=>{throw(0,Hf.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var Gf=u(e=>{async function r(t={}){return((await(await e.post("key/list",{signal:t.signal,searchParams:f(t),headers:t.headers})).json()).Keys||[]).map(s=>T(s))}return r});var Wf=u(e=>{async function r(t,n,o={}){let s=await e.post("key/rename",{signal:o.signal,searchParams:f({arg:[t,n],...o}),headers:o.headers});return T(await s.json())}return r});var Jf=u(e=>{async function r(t,n={}){let s=await(await e.post("key/rm",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers})).json();return T(s.Keys[0])}return r});function Kf(e){return{export:zf(e),gen:Mf(e),import:qf(e),info:Vf(e),list:Gf(e),rename:Wf(e),rm:Jf(e)}}var Xf=u(e=>{async function r(t,n,o={}){let s=await e.post("log/level",{signal:o.signal,searchParams:f({arg:[t,n],...o}),headers:o.headers});return T(await s.json())}return r});var Qf=u(e=>{async function r(t={}){return(await(await e.post("log/ls",{signal:t.signal,searchParams:f(t),headers:t.headers})).json()).Strings}return r});var Zf=u(e=>{async function*r(t={}){yield*(await e.post("log/tail",{signal:t.signal,searchParams:f(t),headers:t.headers})).ndjson()}return r});function Yf(e){return{level:Xf(e),ls:Qf(e),tail:Zf(e)}}var el=u(e=>{async function r(t,n={}){let o=await e.post("name/publish",{signal:n.signal,searchParams:f({arg:`${t}`,...n}),headers:n.headers});return T(await o.json())}return r});var rl=u(e=>{async function*r(t,n={}){let o=await e.post("name/resolve",{signal:n.signal,searchParams:f({arg:t,stream:!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield s.Path}return r});var tl=u(e=>{async function r(t,n={}){let o=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers});return T(await o.json())}return r});var nl=u(e=>{async function r(t={}){let n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:f(t),headers:t.headers});return T(await n.json())}return r});var ol=u(e=>{async function r(t={}){return(await(await e.post("name/pubsub/subs",{signal:t.signal,searchParams:f(t),headers:t.headers})).json()).Strings||[]}return r});function sl(e){return{cancel:tl(e),state:nl(e),subs:ol(e)}}function il(e){return{publish:el(e),resolve:rl(e),pubsub:sl(e)}}var al=u(e=>{async function r(t,n={}){let s=await(await e.post("object/data",{signal:n.signal,searchParams:f({arg:`${t instanceof Uint8Array?m.decode(t):t}`,...n}),headers:n.headers})).arrayBuffer();return new Uint8Array(s,0,s.byteLength)}return r});var cl=u(e=>{async function r(t,n={}){let s=await(await e.post("object/get",{signal:n.signal,searchParams:f({arg:`${t instanceof Uint8Array?m.decode(t):t}`,dataEncoding:"base64",...n}),headers:n.headers})).json();return{Data:oe(s.Data,"base64pad"),Links:(s.Links||[]).map(i=>({Name:i.Name,Hash:m.parse(i.Hash),Tsize:i.Size}))}}return r});var ul=u(e=>{async function r(t,n={}){return((await(await e.post("object/links",{signal:n.signal,searchParams:f({arg:`${t instanceof Uint8Array?m.decode(t):t}`,...n}),headers:n.headers})).json()).Links||[]).map(i=>({Name:i.Name,Tsize:i.Size,Hash:m.parse(i.Hash)}))}return r});var fl=u(e=>{async function r(t={}){let n=await e.post("object/new",{signal:t.signal,searchParams:f({arg:t.template,...t}),headers:t.headers}),{Hash:o}=await n.json();return m.parse(o)}return r});var ll=(e,r)=>u(n=>{let o=nn(e,r);async function s(i,a={}){return o(i,{...a,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return s})(r);var pl=u(e=>{async function r(t,n={}){let s=await(await e.post("object/stat",{signal:n.signal,searchParams:f({arg:`${t}`,...n}),headers:n.headers})).json();return{...s,Hash:m.parse(s.Hash)}}return r});var dl=u(e=>{async function r(t,n,o={}){let s=await e.post("object/patch/add-link",{signal:o.signal,searchParams:f({arg:[`${t}`,n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null],...o}),headers:o.headers}),{Hash:i}=await s.json();return m.parse(i)}return r});var ml=u(e=>{async function r(t,n,o={}){let s=new AbortController,i=$(s.signal,o.signal),a=await e.post("object/patch/append-data",{signal:i,searchParams:f({arg:`${t}`,...o}),...await F([n],s,o.headers)}),{Hash:c}=await a.json();return m.parse(c)}return r});var hl=u(e=>{async function r(t,n,o={}){let s=await e.post("object/patch/rm-link",{signal:o.signal,searchParams:f({arg:[`${t}`,n.Name||n.name||null],...o}),headers:o.headers}),{Hash:i}=await s.json();return m.parse(i)}return r});var yl=u(e=>{async function r(t,n,o={}){let s=new AbortController,i=$(s.signal,o.signal),a=await e.post("object/patch/set-data",{signal:i,searchParams:f({arg:[`${t}`],...o}),...await F([n],s,o.headers)}),{Hash:c}=await a.json();return m.parse(c)}return r});function gl(e){return{addLink:dl(e),appendData:ml(e),rmLink:hl(e),setData:yl(e)}}function wl(e,r){return{data:al(r),get:cl(r),links:ul(r),new:fl(r),put:ll(e,r),stat:pl(r),patch:gl(r)}}var Br=U(X(),1);function Vg(e){return Symbol.iterator in e}function Gg(e){return Symbol.asyncIterator in e}function bl(e){return m.asCID(e)!=null}async function*sn(e){if(e==null)throw(0,Br.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");let r=m.asCID(e);if(r){yield Q({cid:r});return}if(e instanceof String||typeof e=="string"){yield Q({path:e});return}if(e.cid!=null||e.path!=null)return yield Q(e);if(Vg(e)){let t=e[Symbol.iterator](),n=t.next();if(n.done)return t;if(bl(n.value)){yield Q({cid:n.value});for(let o of t)yield Q({cid:o});return}if(n.value instanceof String||typeof n.value=="string"){yield Q({path:n.value});for(let o of t)yield Q({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield Q(n.value);for(let o of t)yield Q(o);return}throw(0,Br.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}if(Gg(e)){let t=e[Symbol.asyncIterator](),n=await t.next();if(n.done)return t;if(bl(n.value)){yield Q({cid:n.value});for await(let o of t)yield Q({cid:o});return}if(n.value instanceof String||typeof n.value=="string"){yield Q({path:n.value});for await(let o of t)yield Q({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield Q(n.value);for await(let o of t)yield Q(o);return}throw(0,Br.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}throw(0,Br.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}function Q(e){let r=e.cid||`${e.path}`;if(!r)throw(0,Br.default)(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");let t={path:r,recursive:e.recursive!==!1};return e.metadata!=null&&(t.metadata=e.metadata),t}var an=u(e=>{async function*r(t,n={}){for await(let{path:o,recursive:s,metadata:i}of sn(t)){let a=await e.post("pin/add",{signal:n.signal,searchParams:f({...n,arg:o,recursive:s,metadata:i?JSON.stringify(i):void 0,stream:!0}),headers:n.headers});for await(let c of a.ndjson()){if(c.Pins){for(let p of c.Pins)yield m.parse(p);continue}yield m.parse(c)}}}return r});function xl(e){let r=an(e);return u(()=>{async function t(n,o={}){return $e(r([{path:n,...o}],o))}return t})(e)}function Sl(e,r,t){let n={type:e,cid:m.parse(r)};return t&&(n.metadata=t),n}var El=u(e=>{async function*r(t={}){let n=[];t.paths&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);let o=await e.post("pin/ls",{signal:t.signal,searchParams:f({...t,arg:n.map(s=>`${s}`),stream:!0}),headers:t.headers});for await(let s of o.ndjson()){if(s.Keys){for(let i of Object.keys(s.Keys))yield Sl(s.Keys[i].Type,i,s.Keys[i].Metadata);return}yield Sl(s.Type,s.Cid,s.Metadata)}}return r});var cn=u(e=>{async function*r(t,n={}){for await(let{path:o,recursive:s}of sn(t)){let i=new URLSearchParams(n.searchParams);i.append("arg",`${o}`),s!=null&&i.set("recursive",String(s));let a=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:f({...n,arg:`${o}`,recursive:s})});for await(let c of a.ndjson()){if(c.Pins){yield*c.Pins.map(p=>m.parse(p));continue}yield m.parse(c)}}}return r});var Pl=e=>{let r=cn(e);return u(()=>{async function t(n,o={}){return $e(r([{path:n,...o}],o))}return t})(e)};var un=({Name:e,Status:r,Cid:t})=>({cid:m.parse(t),name:e,status:r}),Tl=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},Al=e=>{if(m.asCID(e))return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Ur=({service:e,cid:r,name:t,status:n,all:o})=>{let s=f({service:Tl(e),name:t,force:o?!0:void 0});if(r)for(let i of r)s.append("cid",Al(i));if(n)for(let i of n)s.append("status",i);return s},Cl=({cid:e,service:r,background:t,name:n,origins:o})=>{let s=f({arg:Al(e),service:Tl(r),name:n,background:t?!0:void 0});if(o)for(let i of o)s.append("origin",i.toString());return s};function vl(e){async function r(t,{timeout:n,signal:o,headers:s,...i}){let a=await e.post("pin/remote/add",{timeout:n,signal:o,headers:s,searchParams:Cl({cid:t,...i})});return un(await a.json())}return r}function kl(e){async function*r({timeout:t,signal:n,headers:o,...s}){let i=await e.post("pin/remote/ls",{timeout:t,signal:n,headers:o,searchParams:Ur(s)});for await(let a of i.ndjson())yield un(a)}return r}function Bl(e){async function r({timeout:t,signal:n,headers:o,...s}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Ur({...s,all:!1})})}return r}function Ul(e){async function r({timeout:t,signal:n,headers:o,...s}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Ur({...s,all:!0})})}return r}function Il(e){let r=String(e);if(r==="undefined")throw Error("endpoint is required");return r[r.length-1]==="/"?r.slice(0,-1):r}function _l(e){return{service:e.Service,endpoint:new URL(e.ApiEndpoint),...e.Stat&&{stat:Wg(e.Stat)}}}function Wg(e){switch(e.Status){case"valid":{let{Pinning:r,Pinned:t,Queued:n,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:r,pinned:t,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function Nl(e){async function r(t,n){let{endpoint:o,key:s,headers:i,timeout:a,signal:c}=n;await e.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:f({arg:[t,Il(o),s]}),headers:i})}return r}function Dl(e){async function r(t={}){let{stat:n,headers:o,timeout:s,signal:i}=t,a=await e.post("pin/remote/service/ls",{timeout:s,signal:i,headers:o,searchParams:n===!0?f({stat:n}):void 0}),{RemoteServices:c}=await a.json();return c.map(_l)}return r}function Rl(e){async function r(t,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:f({arg:t})})}return r}function Ol(e){let r=new Ve(e);return{add:Nl(r),ls:Dl(r),rm:Rl(r)}}function Ll(e){let r=new Ve(e);return{add:vl(r),ls:kl(r),rm:Bl(r),rmAll:Ul(r),service:Ol(e)}}function Fl(e){return{addAll:an(e),add:xl(e),ls:El(e),rmAll:cn(e),rm:Pl(e),remote:Ll(e)}}var $l=e=>Array.isArray(e)?e.map(fn):e,fn=e=>D(Ir(e)),Ir=e=>He.decode(e),jl=e=>BigInt(`0x${D(He.decode(e),"base16")}`),_r=e=>He.encode(oe(e));var zl=u(e=>{async function r(t={}){let{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:f(t),headers:t.headers})).json();return $l(n)||[]}return r});var Ml=u(e=>{async function r(t,n={}){let o=await e.post("pubsub/peers",{signal:n.signal,searchParams:f({arg:_r(t),...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return r});var ql=u(e=>{async function r(t,n,o={}){let s=f({arg:_r(t),...o}),i=new AbortController,a=$(i.signal,o.signal);await(await e.post("pubsub/pub",{signal:a,searchParams:s,...await F([n],i,o.headers)})).text()}return r});var Jg=zt("ipfs-http-client:pubsub:subscribe"),Hl=(e,r)=>u(t=>{async function n(o,s,i={}){i.signal=r.subscribe(o,s,i.signal);let a,c,p=new Promise((y,x)=>{a=y,c=x}),d=setTimeout(()=>a(),1e3);return t.post("pubsub/sub",{signal:i.signal,searchParams:f({arg:_r(o),...i}),headers:i.headers}).catch(y=>{r.unsubscribe(o,s),c(y)}).then(y=>{clearTimeout(d),y&&(Kg(y,{onMessage:x=>{if(s){if(typeof s=="function"){s(x);return}typeof s.handleEvent=="function"&&s.handleEvent(x)}},onEnd:()=>r.unsubscribe(o,s),onError:i.onError}),a())}),p}return n})(e);async function Kg(e,{onMessage:r,onEnd:t,onError:n}){n=n||Jg;try{for await(let o of e.ndjson())try{if(!o.from)continue;o.from!=null&&o.seqno!=null?r({type:"signed",from:L(o.from),data:Ir(o.data),sequenceNumber:jl(o.seqno),topic:fn(o.topicIDs[0]),key:Ir(o.key??"u"),signature:Ir(o.signature??"u")}):r({type:"unsigned",data:Ir(o.data),topic:fn(o.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,n(s,!1,o)}}catch(o){Xg(o)||n(o,!0)}finally{t()}}var Xg=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};var Vl=(e,r)=>{async function t(n,o){r.unsubscribe(n,o)}return t};var ln=class{constructor(){this._subs=new Map}subscribe(r,t,n){let o=this._subs.get(r)||[];if(o.find(i=>i.handler===t))throw new Error(`Already subscribed to ${r} with this handler`);let s=new AbortController;return this._subs.set(r,[{handler:t,controller:s}].concat(o)),n&&n.addEventListener("abort",()=>this.unsubscribe(r,t)),s.signal}unsubscribe(r,t){let n=this._subs.get(r)||[],o;t?(this._subs.set(r,n.filter(s=>s.handler!==t)),o=n.filter(s=>s.handler===t)):(this._subs.set(r,[]),o=n),(this._subs.get(r)||[]).length||this._subs.delete(r),o.forEach(s=>s.controller.abort())}};function Gl(e){let r=new ln;return{ls:zl(e),peers:Ml(e),publish:ql(e),subscribe:Hl(e,r),unsubscribe:Vl(e,r)}}var Wl=u(e=>{async function*r(t={}){yield*(await e.post("refs/local",{signal:t.signal,transform:T,searchParams:f(t),headers:t.headers})).ndjson()}return r});var Jl=u((e,r)=>Object.assign(async function*(n,o={}){let s=Array.isArray(n)?n:[n];yield*(await e.post("refs",{signal:o.signal,searchParams:f({arg:s.map(a=>`${a instanceof Uint8Array?m.decode(a):a}`),...o}),headers:o.headers,transform:T})).ndjson()},{local:Wl(r)}));var Kl=u(e=>{async function*r(t={}){yield*(await e.post("repo/gc",{signal:t.signal,searchParams:f(t),headers:t.headers,transform:o=>({err:o.Error?new Error(o.Error):null,cid:(o.Key||{})["/"]?m.parse(o.Key["/"]):null})})).ndjson()}return r});var pn=u(e=>{async function r(t={}){let o=await(await e.post("repo/stat",{signal:t.signal,searchParams:f(t),headers:t.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}return r});var Xl=u(e=>{async function r(t={}){return(await(await e.post("repo/version",{signal:t.signal,searchParams:f(t),headers:t.headers})).json()).Version}return r});function Ql(e){return{gc:Kl(e),stat:pn(e),version:Xl(e)}}var Zl=u(e=>{async function*r(t={}){yield*(await e.post("stats/bw",{signal:t.signal,searchParams:f(t),headers:t.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}return r});function Yl(e){return{bitswap:Kt(e),repo:pn(e),bw:Zl(e)}}var ep=u(e=>{async function r(t={}){let n=await e.post("swarm/addrs",{signal:t.signal,searchParams:f(t),headers:t.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(s=>({id:L(s),addrs:(o[s]||[]).map(i=>B(i))}))}return r});var rp=u(e=>{async function r(t,n={}){let o=await e.post("swarm/connect",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return r});var tp=u(e=>{async function r(t,n={}){let o=await e.post("swarm/disconnect",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return r});var np=u(e=>{async function r(t={}){let n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:f(t),headers:t.headers}),{Strings:o}=await n.json();return(o||[]).map(s=>B(s))}return r});var op=u(e=>{async function r(t={}){let n=await e.post("swarm/peers",{signal:t.signal,searchParams:f(t),headers:t.headers}),{Peers:o}=await n.json();return(o||[]).map(s=>({addr:B(s.Addr),peer:L(s.Peer),muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}return r});function sp(e){return{addrs:ep(e),connect:rp(e),disconnect:tp(e),localAddrs:np(e),peers:op(e)}}var dn=u(e=>{async function*r(t,n={}){let o=new AbortController,s=$(o.signal,n.signal),{headers:i,body:a,total:c,parts:p}=await F(t,o,n.headers),[d,y]=typeof n.progress=="function"?Qg(c,p,n.progress):[void 0,void 0],x=await e.post("add",{searchParams:f({"stream-channels":!0,...n,progress:Boolean(d)}),onUploadProgress:y,signal:s,headers:i,body:a});for await(let _ of x.ndjson())_=T(_),_.hash!==void 0?yield Yg(_):d&&d(_.bytes||0,_.name)}return r}),Qg=(e,r,t)=>r?[void 0,Zg(e,r,t)]:[t,void 0],Zg=(e,r,t)=>{let n=0,o=r.length;return({loaded:s,total:i})=>{let a=Math.floor(s/i*e);for(;n<o;){let{start:c,end:p,name:d}=r[n];if(a<p){t(a-c,d);break}else t(p-c,d),n+=1}}};function Yg({name:e,hash:r,size:t,mode:n,mtime:o,mtimeNsecs:s}){let i={path:e,cid:m.parse(r),size:parseInt(t)};return n!=null&&(i.mode=parseInt(n,8)),o!=null&&(i.mtime={secs:o,nsecs:s||0}),i}var ip=U(X(),1);async function*mn(e,r={}){let t=e.getReader();try{for(;;){let n=await t.read();if(n.done)return;yield n.value}}finally{r.preventCancel!==!0&&await t.cancel(),t.releaseLock()}}function ss(e){return typeof e.stream=="function"?mn(e.stream()):mn(new Response(e).body)}async function*hn(e){yield e}async function ap(e){if(pe(e))return hn(is(e));if(typeof e=="string"||e instanceof String)return hn(is(e.toString()));if(Oe(e))return ss(e);if(Le(e)&&(e=Re(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=De(e),{value:t,done:n}=await r.peek();if(n)return hn(new Uint8Array(0));if(r.push(t),Number.isInteger(t))return hn(Uint8Array.from(await nt(r)));if(pe(t)||typeof t=="string"||t instanceof String)return Cr(r,is)}throw(0,ip.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}function is(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):oe(e.toString())}var gn=U(X(),1);async function*cp(e,r){if(e==null)throw(0,gn.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield yn(e.toString(),r);return}if(pe(e)||Oe(e)){yield yn(e,r);return}if(Le(e)&&(e=Re(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let t=De(e),{value:n,done:o}=await t.peek();if(o){yield{content:[]};return}if(t.push(n),Number.isInteger(n)||pe(n)||typeof n=="string"||n instanceof String){yield yn(t,r);return}throw(0,gn.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(ot(e)){yield yn(e,r);return}throw(0,gn.default)(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function yn(e,r){let{path:t,mode:n,mtime:o,content:s}=e,i={path:t||"",mode:rn(n),mtime:tn(o)};return s?i.content=await r(s):t||(i.content=await r(e)),i}function up(e){return cp(e,ap)}function fp(e){let r=dn(e);return u(()=>{async function t(n,o={}){return await $e(r(up(n),o))}return t})(e)}var lp=u(e=>{async function*r(t,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:f({arg:t.toString(),...n}),headers:n.headers})).iterator()}return r});var pp=u(e=>async(t={})=>(await e.post("commands",{signal:t.signal,searchParams:f(t),headers:t.headers})).json());var dp=u(e=>async(t,n={})=>(await(await e.post("dns",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers})).json()).Path);var mp=u(e=>()=>{let r=new URL(e.opts.base||"");return{host:r.hostname,port:r.port,protocol:r.protocol,pathname:r.pathname,"api-path":r.pathname}});var hp=u(e=>{async function*r(t,n={}){let o={arg:`${t instanceof Uint8Array?m.decode(t):t}`,...n};o.compressionLevel&&(o["compression-level"]=o.compressionLevel,delete o.compressionLevel),yield*(await e.post("get",{signal:n.signal,searchParams:f(o),headers:n.headers})).iterator()}return r});var wn=u(e=>{async function r(t={}){let o=await(await e.post("id",{signal:t.signal,searchParams:f({arg:t.peerId?t.peerId.toString():void 0,...t}),headers:t.headers})).json(),s={...T(o)};return s.id=L(s.id),s.addresses&&(s.addresses=s.addresses.map(i=>B(i))),s}return r});var yp=e=>{let r=wn(e);async function t(n={}){let o=await r(n);return Boolean(o&&o.addresses&&o.addresses.length)}return t};var gp=u((e,r)=>{async function*t(n,o={}){let s=`${n instanceof Uint8Array?m.decode(n):n}`;async function i(c){let p=c.Hash;if(p.includes("/")){let y=p.startsWith("/ipfs/")?p:`/ipfs/${p}`;p=(await on(r)(y)).cid}else p=m.parse(p);let d={name:c.Name,path:s+(c.Name?`/${c.Name}`:""),size:c.Size,cid:p,type:ew(c)};return c.Mode&&(d.mode=parseInt(c.Mode,8)),c.Mtime!==void 0&&c.Mtime!==null&&(d.mtime={secs:c.Mtime},c.MtimeNsecs!==void 0&&c.MtimeNsecs!==null&&(d.mtime.nsecs=c.MtimeNsecs)),d}let a=await e.post("ls",{signal:o.signal,searchParams:f({arg:s,...o}),headers:o.headers});for await(let c of a.ndjson()){if(c=c.Objects,!c)throw new Error("expected .Objects in results");if(c=c[0],!c)throw new Error("expected one array in results.Objects");let p=c.Links;if(!Array.isArray(p))throw new Error("expected one array in results.Objects[0].Links");if(!p.length){yield i(c);return}yield*p.map(i)}}return t});function ew(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}var wp=u(e=>{async function r(t={}){let n=await e.post("dns",{signal:t.signal,searchParams:f(t),headers:t.headers});return T(await n.json())}return r});var bp=u(e=>{async function*r(t,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:f({arg:`${t}`,...n}),headers:n.headers,transform:T})).ndjson()}return r});var xp=u(e=>{async function r(t,n={}){let o=await e.post("resolve",{signal:n.signal,searchParams:f({arg:t,...n}),headers:n.headers}),{Path:s}=await o.json();return s}return r});var Sp=U(X(),1),Ep=u(e=>async(t={})=>{throw(0,Sp.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var Pp=u(e=>{async function r(t={}){await(await e.post("shutdown",{signal:t.signal,searchParams:f(t),headers:t.headers})).text()}return r});var Tp=u(e=>{async function r(t={}){let n=await e.post("version",{signal:t.signal,searchParams:f(t),headers:t.headers});return{...T(await n.json()),"ipfs-http-client":"1.0.0"}}return r});var kp=U(Ap(),1),Bp=U(vp(),1);function ow(e={}){let r={name:Ze.name,code:Ze.code,encode:p=>p,decode:p=>p},t=Object.values(Te);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach(p=>t.push(p));let n=new lt({bases:t,loadBase:e.ipld&&e.ipld.loadBase}),o=Object.values(ra);[In,vt,Qn,Zn,r].concat(e.ipld&&e.ipld.codecs||[]).forEach(p=>o.push(p));let s=new pt({codecs:o,loadCodec:e.ipld&&e.ipld.loadCodec}),i=Object.values(ea);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach(p=>i.push(p));let a=new dt({hashers:i,loadHasher:e.ipld&&e.ipld.loadHasher});return{add:fp(e),addAll:dn(e),bitswap:Oc(e),block:Vu(e),bootstrap:Qu(e),cat:lp(e),commands:pp(e),config:sf(e),dag:pf(s,e),dht:bf(e),diag:Pf(e),dns:dp(e),files:$f(e),get:hp(e),getEndpointConfig:mp(e),id:wn(e),isOnline:yp(e),key:Kf(e),log:Yf(e),ls:gp(e),mount:wp(e),name:il(e),object:wl(s,e),pin:Fl(e),ping:bp(e),pubsub:Gl(e),refs:Jl(e),repo:Ql(e),resolve:xp(e),start:Ep(e),stats:Yl(e),stop:Pp(e),swarm:sp(e),version:Tp(e),bases:n,codecs:s,hashers:a}}var sw=kp.default;return Rp(iw);})();
return IpfsHttpClient}));
